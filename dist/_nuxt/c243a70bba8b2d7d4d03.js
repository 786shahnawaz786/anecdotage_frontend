(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{400:function(t,e,o){"use strict";o.r(e);o(17),o(15),o(11),o(24),o(25);var r=o(1),n=o(6),c=(o(5),o(36),o(35),o(22),o(570)),l=o(28),d=o(612),m=o(567),h=o(124),f=o(629),v=o(573),_=o(599);function y(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,r)}return o}function C(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?y(Object(o),!0).forEach((function(e){Object(n.a)(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):y(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var w={components:{VueCkeditor:c.a,AdminButtons:v.a},mixins:[m.a,h.a,f.a,_.a],computed:C(C({},Object(l.c)({settings:"settings",thread:"threads/thread"})),{},{owns:function(){return!!this.signedIn&&this.$store.state.auth.user.id==this.thread.user_id},stripTagTitle:function(){return this.thread.title.replace(/(<([^>]+)>)/gi,"")}}),head:function(){return{title:"".concat(this.settings.site_title," | Edit:  ").concat(this.stripTagTitle," ")}},data:function(){return{defaultChannel:{name:"",id:"",slug:""},title_case:!1,updatedThread:null}},created:function(){this.isAdmin||this.owns||this.$router.push({name:"index"})},mounted:function(){this.thread&&(this.form.title=this.thread.title,this.form.body=this.thread.body,this.form.source=this.thread.source,this.form.location=this.thread.formatted_address,this.form.main_subject=this.thread.main_subject,this.form.age_restriction=this.thread.age_restriction,this.form.anonymous=this.thread.anonymous,this.defaultChannel=this.thread.channel,this.form.slide_body=this.thread.slide_body,this.form.slide_image_pos=this.thread.slide_image_pos,this.form.slide_color_bg=this.thread.slide_color_bg,this.form.slide_color_0=this.thread.slide_color_0,this.form.slide_color_1=this.thread.slide_color_1,this.form.slide_color_2=this.thread.slide_color_2,this.form.tags=this.thread.tags.map((function(t){return t.name})),"C"==this.thread.cno?this.form.cno={famous:!0,celebrity:!0}:"N"==this.thread.cno?this.form.cno={famous:!0,celebrity:!1}:this.form.cno={famous:!1,celebrity:!1},this.updatedThread=this.thread);for(var iframe=document.querySelectorAll("iframe"),t=document.querySelector(".thread-body").getBoundingClientRect(),i=0;i<iframe.length;i++)iframe[i].width=t.width,iframe[i].height=t.height;document.getElementById("title").focus},fetch:function(t){return Object(r.a)(regeneratorRuntime.mark((function e(){var o,r,n,c,l,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.params,t.query,r=t.error,n=t.$axios,c=t.store,l=t.redirect,e.prev=1,e.next=4,n.$get("threads/".concat(o.slug,"/edit"));case 4:d=e.sent,c.commit("threads/setCurrentThread",d.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),404===e.t0.response.status?r({statusCode:404,message:"Thread Not Found"}):429===e.t0.response.status?r({statusCode:429,message:"Too Many Attempt"}):401===e.t0.response.status?l("/login"):r({statusCode:500,message:"Server Error"});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))()},methods:{updateAndGoThumb:function(){var t=this;this.updateThread().then((function(e){t.form.scrape_image?setTimeout((function(){t.$router.push({name:"threads.show",params:{slug:e.data.slug}})}),1500):t.$router.push({name:"threads.thumbnail",params:{slug:e.data.slug}})}))},updateAndGoThread:function(){var t=this;this.updateThread().then((function(e){t.show_share_modal=!0}))},updateThread:function(){var t=this;return this.errors=[],""==this.form.channel&&(this.form.channel=this.defaultChannel),this.form.submit("post","threads/".concat(this.thread.slug),{transformRequest:[function(data,t){return Object(d.serialize)(data)}]}).then((function(e){return t.updatedThread=e.data,t.$toast.open({type:"success",position:"top-right",message:"Thread Update Successfully"}),e})).catch((function(t){}))}}},k=(o(782),o(3)),component=Object(k.a)(w,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("div",{staticClass:"card card-m-5"},[r("div",{staticClass:"card-header d-flex justify-content-between"},[r("h2",{staticClass:"card-title big-label"},[t._v("Post an Anecdote")]),t._v(" "),r("AdminButtons",{attrs:{thread:t.thread}})],1),t._v(" "),r("div",{staticClass:"card-body"},[r("form",{attrs:{action:"",method:"post",enctype:"multipart/form-data"},on:{submit:function(e){return e.preventDefault(),t.updateAndGoThumb.apply(null,arguments)}}},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6"},[r("div",{staticClass:"form-group",class:{"has-error":t.errors.title}},[r("label",{staticClass:"control-label",attrs:{for:"title"}},[t._v("Title (required)")]),t._v(" "),r("BaseInput",{attrs:{form:t.form,field:"title",id:"title",placeholder:"Enter Thread Title",inputType:"text"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}}),t._v(" "),r("div",{staticClass:"form-check"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.title_case,expression:"title_case"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"title_case"},domProps:{checked:Array.isArray(t.title_case)?t._i(t.title_case,null)>-1:t.title_case},on:{change:function(e){var o=t.title_case,r=e.target,n=!!r.checked;if(Array.isArray(o)){var c=t._i(o,null);r.checked?c<0&&(t.title_case=o.concat([null])):c>-1&&(t.title_case=o.slice(0,c).concat(o.slice(c+1)))}else t.title_case=n}}}),t._v(" "),r("label",{staticClass:"form-check-label",attrs:{for:"title_case"}},[t._v("Apply Title Case")])])],1)])]),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6"},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"control-label",attrs:{for:"main_subject"}},[t._v("Main Subject:")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.main_subject,expression:"form.main_subject"}],staticClass:"form-control",attrs:{type:"text",name:"main_subject",id:"main_subject"},domProps:{value:t.form.main_subject},on:{input:function(e){e.target.composing||t.$set(t.form,"main_subject",e.target.value)}}}),t._v(" "),r("span",{staticClass:"help-block"},[t._v("Who or what is this story about? This will be added as a tag.\n                ")])]),t._v(" "),r("div",{staticClass:"form-group"},[r("div",{staticClass:"checkbox"},[r("label",[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.scrape_image,expression:"form.scrape_image"}],attrs:{type:"checkbox",value:"1"},domProps:{checked:Array.isArray(t.form.scrape_image)?t._i(t.form.scrape_image,"1")>-1:t.form.scrape_image},on:{change:function(e){var o=t.form.scrape_image,r=e.target,n=!!r.checked;if(Array.isArray(o)){var c=t._i(o,"1");r.checked?c<0&&t.$set(t.form,"scrape_image",o.concat(["1"])):c>-1&&t.$set(t.form,"scrape_image",o.slice(0,c).concat(o.slice(c+1)))}else t.$set(t.form,"scrape_image",n)}}}),t._v(" "),r("span",{staticClass:"import_wikipedia_image_checkbox"},[t._v("Try to import Wikipedia image\n                        "),t.showImportWikipediaTooltip?r("img",{attrs:{width:"20px",height:"20px",src:o(595),alt:"Try to import image from wikipedia","data-toggle":"tooltip","data-placement":"bottom",title:t.tooltipText,"data-original-title":t.tooltipText}}):r("img",{attrs:{width:"20px",height:"20px",src:o(595),alt:"Try to import image from wikipedia",title:"","data-original-title":""}})])])])])])]),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-4"},[r("div",{staticClass:"form-group",attrs:{id:"category"}},[r("label",{attrs:{for:"input"}},[t._v("Category")]),t._v(" "),r("input",{staticClass:"form-control",attrs:{id:"input",type:"text",placeholder:"Choose a category",autocomplete:"off"},domProps:{value:t.defaultChannel.name}}),t._v(" "),r("typeahead",{attrs:{"match-start":"","append-to-body":!0,target:"#input",data:t.allchannels,"item-key":"name"},model:{value:t.form.channel,callback:function(e){t.$set(t.form,"channel",e)},expression:"form.channel"}})],1)]),t._v(" "),r("div",{staticClass:"col-md-8"},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"control-label",attrs:{for:"tags"}},[t._v(" Tags ")]),t._v(" "),r("v-select",{attrs:{taggable:"","push-tags":"",options:t.alltags,multiple:"",closeOnSelect:!1},on:{search:t.searchTag,input:t.selecetdTag},scopedSlots:t._u([{key:"no-options",fn:function(e){var o=e.search;return[e.searching?[t._v("\n                      No results found for "),r("em",[t._v(t._s(o))]),t._v(".\n                    ")]:r("em",{staticStyle:{opacity:"0.5"}},[t._v("Start typing to search for a tags.")])]}}]),model:{value:t.form.tags,callback:function(e){t.$set(t.form,"tags",e)},expression:"form.tags"}})],1)])]),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-12"},[r("div",{staticClass:"form-group thread-body",class:{"is-invalid":t.form.errors.errors.body}},[r("label",{staticClass:"control-label",attrs:{for:"body"}},[t._v("Your Story (required)")]),t._v(" "),r("vue-ckeditor",{attrs:{config:t.config},model:{value:t.form.body,callback:function(e){t.$set(t.form,"body",e)},expression:"form.body"}}),t._v(" "),t.form.errors.errors.body?r("p",{staticClass:"text-danger"},[t._v("\n                  "+t._s(t.form.errors.errors.body[0])+"\n                ")]):t._e()],1),t._v(" "),r("div",{staticClass:"form-group"},[r("has-error",{attrs:{form:t.form,field:"body"}})],1)])]),t._v(" "),t.show_more_fields?r("div",{staticClass:"more-fields"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6"},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"control-label",attrs:{for:"source"}},[t._v("Source")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.source,expression:"form.source"}],staticClass:"form-control",attrs:{type:"text",name:"source",id:"source"},domProps:{value:t.form.source},on:{input:function(e){e.target.composing||t.$set(t.form,"source",e.target.value)}}}),t._v(" "),r("span",{staticClass:"help-block"},[t._v("\n                    Where did you hear this story? If this story was reported on\n                    a website or other publication please list it here\n                    (<i> <a> tags are allowed).")])])]),t._v(" "),r("div",{staticClass:"col-md-6"},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"control-label",attrs:{for:"location"}},[t._v("Location")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.location,expression:"form.location"}],staticClass:"form-control",attrs:{type:"text",name:"location",id:"location"},domProps:{value:t.form.location},on:{input:function(e){e.target.composing||t.$set(t.form,"location",e.target.value)}}}),t._v(" "),r("span",{staticClass:"help-block"},[t._v('Where did your story take place? If google can find it,\n                    we\'ll add maps & markers for this story. Example locations\n                    are: "111 5th ave, NYC" and "Louvre."')])])])]),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-4"},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"age_restriction"}},[t._v("Age Restriction")]),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.form.age_restriction,expression:"form.age_restriction"}],staticClass:"form-control",attrs:{name:"age_restriction",id:"age_restriction"},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"age_restriction",e.target.multiple?o:o[0])}}},[r("option",{attrs:{selected:""},domProps:{value:0}},[t._v("Ok for everyone")]),t._v(" "),r("option",{domProps:{value:13}},[t._v("PG-13")]),t._v(" "),r("option",{domProps:{value:18}},[t._v("R-rated (18+)")])])])])]),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-4"},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"control-label",attrs:{for:"category"}}),t._v(" "),r("div",{staticClass:"checkbox"},[r("label",[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.cno.famous,expression:"form.cno.famous"}],attrs:{type:"checkbox",value:"1"},domProps:{checked:Array.isArray(t.form.cno.famous)?t._i(t.form.cno.famous,"1")>-1:t.form.cno.famous},on:{change:function(e){var o=t.form.cno.famous,r=e.target,n=!!r.checked;if(Array.isArray(o)){var c=t._i(o,"1");r.checked?c<0&&t.$set(t.form.cno,"famous",o.concat(["1"])):c>-1&&t.$set(t.form.cno,"famous",o.slice(0,c).concat(o.slice(c+1)))}else t.$set(t.form.cno,"famous",n)}}}),t._v(" This story involves a famous person or thing")])]),t._v(" "),t.form.cno.famous?r("div",{staticClass:"checkbox",staticStyle:{"margin-left":"30px"}},[r("label",[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.cno.celebrity,expression:"form.cno.celebrity"}],attrs:{type:"checkbox",value:"1"},domProps:{checked:Array.isArray(t.form.cno.celebrity)?t._i(t.form.cno.celebrity,"1")>-1:t.form.cno.celebrity},on:{change:function(e){var o=t.form.cno.celebrity,r=e.target,n=!!r.checked;if(Array.isArray(o)){var c=t._i(o,"1");r.checked?c<0&&t.$set(t.form.cno,"celebrity",o.concat(["1"])):c>-1&&t.$set(t.form.cno,"celebrity",o.slice(0,c).concat(o.slice(c+1)))}else t.$set(t.form.cno,"celebrity",n)}}}),t._v(" Is it a celebrity?")])]):t._e()])])]),t._v(" "),t.isAdmin?r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6"},[r("div",{staticClass:"form-group"},[r("div",{staticClass:"checkbox"},[r("label",[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.copy_cno,expression:"form.copy_cno"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.form.copy_cno)?t._i(t.form.copy_cno,null)>-1:t.form.copy_cno},on:{change:function(e){var o=t.form.copy_cno,r=e.target,n=!!r.checked;if(Array.isArray(o)){var c=t._i(o,null);r.checked?c<0&&t.$set(t.form,"copy_cno",o.concat([null])):c>-1&&t.$set(t.form,"copy_cno",o.slice(0,c).concat(o.slice(c+1)))}else t.$set(t.form,"copy_cno",n)}}}),t._v(" Copy CNO to items with Main Subject in Title")])])])])]):t._e(),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-3"},[r("div",{staticClass:"form-group"},[r("div",{staticClass:"checkbox"},[r("label",[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.anonymous,expression:"form.anonymous"}],attrs:{type:"checkbox",name:"anonymous"},domProps:{value:1,checked:Array.isArray(t.form.anonymous)?t._i(t.form.anonymous,1)>-1:t.form.anonymous},on:{change:function(e){var o=t.form.anonymous,r=e.target,n=!!r.checked;if(Array.isArray(o)){var c=t._i(o,1);r.checked?c<0&&t.$set(t.form,"anonymous",o.concat([1])):c>-1&&t.$set(t.form,"anonymous",o.slice(0,c).concat(o.slice(c+1)))}else t.$set(t.form,"anonymous",n)}}}),t._v(" Post Anonymously")])])])])]),t._v(" "),t.isAdmin?[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-12"},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"control-label",attrs:{for:"slide_body"}},[t._v("Slide Body")]),t._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.slide_body,expression:"form.slide_body"}],staticClass:"form-control",attrs:{name:"slide_body",id:"slide_body",cols:"30",rows:"3"},domProps:{value:t.form.slide_body},on:{input:function(e){e.target.composing||t.$set(t.form,"slide_body",e.target.value)}}})])])]),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6"},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"control-label",attrs:{for:"slide_image_pos"}},[t._v("Slide Image Position")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.slide_image_pos,expression:"form.slide_image_pos"}],staticClass:"form-control",attrs:{name:"slide_image_pos",id:"slide_image_pos"},domProps:{value:t.form.slide_image_pos},on:{input:function(e){e.target.composing||t.$set(t.form,"slide_image_pos",e.target.value)}}})])]),t._v(" "),r("div",{staticClass:"col-md-6"},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"control-label",attrs:{for:"slide_color_bg"}},[t._v("Slide Color BG")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.slide_color_bg,expression:"form.slide_color_bg"}],staticClass:"form-control",attrs:{name:"slide_color_bg",id:"slide_color_bg"},domProps:{value:t.form.slide_color_bg},on:{input:function(e){e.target.composing||t.$set(t.form,"slide_color_bg",e.target.value)}}})])])]),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-4"},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"control-label",attrs:{for:"slide_color_0"}},[t._v("Slide Color 0")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.slide_color_0,expression:"form.slide_color_0"}],staticClass:"form-control",attrs:{name:"slide_color_0",id:"slide_color_0"},domProps:{value:t.form.slide_color_0},on:{input:function(e){e.target.composing||t.$set(t.form,"slide_color_0",e.target.value)}}})])]),t._v(" "),r("div",{staticClass:"col-md-4"},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"control-label",attrs:{for:"slide_color_1"}},[t._v("Slide Color 1")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.slide_color_1,expression:"form.slide_color_1"}],staticClass:"form-control",attrs:{name:"slide_color_1",id:"slide_color_1"},domProps:{value:t.form.slide_color_1},on:{input:function(e){e.target.composing||t.$set(t.form,"slide_color_1",e.target.value)}}})])]),t._v(" "),r("div",{staticClass:"col-md-4"},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"control-label",attrs:{for:"slide_color_2"}},[t._v("Slide Color 2")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.slide_color_2,expression:"form.slide_color_2"}],staticClass:"form-control",attrs:{name:"slide_color_2",id:"slide_color_2"},domProps:{value:t.form.slide_color_2},on:{input:function(e){e.target.composing||t.$set(t.form,"slide_color_2",e.target.value)}}})])])])]:t._e()],2):t._e(),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-12"},[r("div",{staticClass:"form-group"},[r("button",{staticClass:"btn btn-success",attrs:{disabled:t.form.busy,type:"button"},on:{click:t.updateAndGoThread}},[t.form.busy?r("span",[r("svg",{staticClass:"svg-inline--fa fa-spinner",attrs:{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"spinner",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"}},[r("path",{attrs:{fill:"currentColor",d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"}})])]):t._e(),t._v("\n                  Update Your Story\n                ")]),t._v(" "),r("button",{staticClass:"btn btn-primary",attrs:{disabled:t.form.busy,type:"submit"}},[t.form.busy?r("span",[r("svg",{staticClass:"svg-inline--fa fa-spinner",attrs:{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"spinner",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"}},[r("path",{attrs:{fill:"currentColor",d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"}})])]):t._e(),t._v("\n                  Add An Image\n                ")])])])]),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-12"},[r("div",{staticClass:"form-group"},[r("nuxt-link",{staticClass:"btn btn-danger",attrs:{to:{name:"threads.show",params:{slug:t.thread.slug}},href:"#"}},[r("svg",{staticClass:"svg-inline--fa fa-arrow-left",attrs:{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"arrow-left",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"}},[r("path",{attrs:{fill:"currentColor",d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"}})]),t._v("\n                  Cancel")])],1)])])])])]),t._v(" "),t.show_share_modal?r("ShareModal",{attrs:{thread:t.thread},on:{"share-cancel":function(e){return t.cancelShare(t.updatedThread)},"hide-share-modal":function(e){t.show_share_modal=!1},"share-complete":function(e){return t.completeShare(t.updatedThread)}}}):t._e()],1)}),[],!1,null,"4ba645de",null);e.default=component.exports},567:function(t,e,o){"use strict";e.a={mounted:function(){document.body.scrollTop=0,document.documentElement.scrollTop=0}}},568:function(t,e,o){"use strict";var r=o(2),n=o(587),c=o.n(n);e.a={created:function(){r.a.use(c.a)}}},570:function(t,e,o){"use strict";var r=(new Date).getTime();e.a=function(t,e,o,i,s,r,a,n){"boolean"!=typeof a&&(n=a,a=!1);var u,c=o;if(t&&t.render&&(c.render=t.render,c.staticRenderFns=t.staticRenderFns,c._compiled=!0),u)if(c.functional){var l=c.render;c.render=function(t,e){return u.call(e),l(t,e)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,u):[u]}return o}({render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"ckeditor"},[e("textarea",{attrs:{name:this.name,id:this.id,types:this.types,config:this.config,disabled:this.readOnlyMode},domProps:{value:this.value}})])},staticRenderFns:[]},0,{name:"VueCkeditor",props:{name:{type:String,default:function(){return"editor-".concat(++r)}},value:{type:String},id:{type:String,default:function(){return"editor-".concat(r)}},types:{type:String,default:function(){return"classic"}},config:{type:Object,default:function(){}},instanceReadyCallback:{type:Function},readOnlyMode:{type:Boolean,default:function(){return!1}}},data:function(){return{instanceValue:""}},computed:{instance:function(){return CKEDITOR.instances[this.id]}},watch:{value:function(t){try{this.instance&&this.update(t)}catch(t){}},readOnlyMode:function(t){this.instance.setReadOnly(t)}},mounted:function(){this.create()},methods:{create:function(){var t=this;"undefined"==typeof CKEDITOR?console.log("CKEDITOR is missing (http://ckeditor.com/)"):("inline"===this.types?CKEDITOR.inline(this.id,this.config):CKEDITOR.replace(this.id,this.config),this.instance.setData(this.value),this.instance.on("instanceReady",(function(){t.instance.setData(t.value)})),this.instance.on("change",this.onChange),this.instance.on("mode",this.onMode),this.instance.on("blur",(function(e){t.$emit("blur",e)})),this.instance.on("focus",(function(e){t.$emit("focus",e)})),this.instance.on("contentDom",(function(e){t.$emit("contentDom",e)})),CKEDITOR.on("dialogDefinition",(function(e){t.$emit("dialogDefinition",e)})),this.instance.on("fileUploadRequest",(function(e){t.$emit("fileUploadRequest",e)})),this.instance.on("fileUploadResponse",(function(e){setTimeout((function(){t.onChange()}),0),t.$emit("fileUploadResponse",e)})),void 0!==this.instanceReadyCallback&&this.instance.on("instanceReady",this.instanceReadyCallback),this.$once("hook:beforeDestroy",(function(){t.destroy()})))},update:function(t){this.instanceValue!==t&&(this.instance.setData(t,{internal:!1}),this.instanceValue=t)},destroy:function(){try{var t=window.CKEDITOR;t.instances&&t.instances[this.id]&&t.instances[this.id].destroy()}catch(t){}},onMode:function(){var t=this;if("source"===this.instance.mode){var e=this.instance.editable();e.attachListener(e,"input",(function(){t.onChange()}))}},onChange:function(){var t=this.instance.getData();t!==this.value&&(this.$emit("input",t),this.instanceValue=t)}}},0,0,0,void 0,void 0)},573:function(t,e,o){"use strict";var r=o(1),n=(o(22),o(5),{mixins:[o(568).a],props:{thread:{type:Object,required:!0}},data:function(){return{form:this.$vform({title:""}),duplicateForm:this.$vform({channel:"",tags:[],title:"",body:"",source:"",location:"",cno:{famous:!1,celebrity:!1},main_subject:"",scrape_image:!1,age_restriction:0,anonymous:0,isDuplicate:!0})}},mounted:function(){this.form.title=this.thread.title},computed:{signedIn:function(){return this.$auth.loggedIn},isAdmin:function(){return!!this.signedIn&&this.$store.state.auth.user.is_admin},owns:function(t){return!!this.signedIn&&this.$store.state.auth.user.id==this.thread.user_id}},methods:{loadTrending:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$get("trending/threads");case 2:return o=e.sent,e.abrupt("return",t.$store.commit("setTrendings",o.data));case 4:case"end":return e.stop()}}),e)})))()},submit:function(){var t=this;this.form.put("admin/threads/".concat(this.thread.slug),this.form).then((function(e){t.$toast.open({type:"success",position:"top-right",message:"Title Update Successfully"}),$("#edit-title-".concat(t.thread.id)).modal("hide")})).catch((function(t){console.log(t)}))},submitDuplicate:function(){var t=this;this.duplicateForm.post("threads").then((function(e){t.submitDuplicateImage(e.data.slug)})).catch((function(t){console.log(t)}))},submitDuplicateImage:function(t){var e=this;this.$axios.$post("threads/".concat(t,"/duplicateImage"),{old_thread:this.thread.slug}).then((function(o){e.$router.push({name:"threads.edit",params:{slug:t}})})).catch((function(t){console.log(t)}))},duplicateItem:function(){var t=this;this.$axios.$get("threads/".concat(this.thread.slug)).then((function(e){var o=e.data;t.form.channel=o.channel,t.duplicateForm.title=o.title,t.duplicateForm.body=o.body,t.duplicateForm.source=o.source,t.duplicateForm.location=o.formatted_address,t.duplicateForm.main_subject=o.main_subject,t.duplicateForm.age_restriction=o.age_restriction,t.duplicateForm.anonymous=o.anonymous,"C"==o.cno?t.duplicateForm.cno={famous:!0,celebrity:!0}:"N"==o.cno?t.duplicateForm.cno={famous:!0,celebrity:!1}:t.duplicateForm.cno={famous:!1,celebrity:!1}})).then((function(e){t.submitDuplicate()}))},deleteThread:function(){var t=this;this.$swal({title:"Are you sure?",icon:"warning",buttons:!0,dangerMode:!0}).then((function(e){e&&t.$axios.$delete("threads/".concat(t.thread.slug)).then((function(e){t.$toast.open({type:"success",position:"top-right",message:"Thread Delete Successfully."}),t.loadTrending(),setTimeout((function(){"threads.show"==t.$nuxt.$route.name?t.$router.push({name:"index"}):t.$router.go(t.$router.currentRoute)}),2e3)})).catch((function(t){}))}))}}}),c=o(3),component=Object(c.a)(n,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"admin-buttons"},[t.isAdmin||t.owns?o("nuxt-link",{staticClass:"btn btn-sm btn-primary",attrs:{to:{name:"threads.edit",params:{slug:t.thread.slug}}}},[t._v("\n    Edit\n  ")]):t._e(),t._v(" "),t.isAdmin?o("nuxt-link",{staticClass:"btn btn-sm btn-success",attrs:{to:{name:"threads.thumbnail",params:{slug:t.thread.slug}}}},[t._v("\n    Image\n  ")]):t._e(),t._v(" "),t.isAdmin?o("button",{staticClass:"btn btn-sm btn-secondary",on:{click:function(e){return e.preventDefault(),t.duplicateItem.apply(null,arguments)}}},[t.duplicateForm.busy?o("span",[o("svg",{staticClass:"svg-inline--fa fa-spinner",attrs:{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"spinner",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"}},[o("path",{attrs:{fill:"currentColor",d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"}})])]):t._e(),t._v("\n    Dup\n  ")]):t._e(),t._v(" "),t.isAdmin?o("button",{staticClass:"btn btn-sm btn-primary",attrs:{"data-toggle":"modal","data-target":"#edit-title-"+t.thread.id}},[t._v("\n    Edit Title\n  ")]):t._e(),t._v(" "),t.owns?o("button",{staticClass:"btn btn-danger btn-sm",on:{click:function(e){return e.preventDefault(),t.deleteThread.apply(null,arguments)}}},[t._v("\n    Delete\n  ")]):t._e(),t._v(" "),t.isAdmin?o("div",{staticClass:"modal fade",attrs:{id:"edit-title-"+t.thread.id,tabindex:"-1",role:"dialog","aria-hidden":"true"}},[o("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[o("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),o("div",{staticClass:"modal-body"},[o("div",{staticClass:"form-group"},[o("label",{staticClass:"control-label",attrs:{for:""}},[t._v("Title")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.form.title,expression:"form.title"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.form.title},on:{input:function(e){e.target.composing||t.$set(t.form,"title",e.target.value)}}})])]),t._v(" "),o("div",{staticClass:"modal-footer"},[o("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[t._v("\n            Update\n          ")])])])])]):t._e()],1)}),[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"modal-header"},[o("h5",{staticClass:"modal-title"},[t._v("Edit title")]),t._v(" "),o("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[o("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],!1,null,"0c68a41c",null);e.a=component.exports},577:function(t,e,o){var content=o(597);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(8).default)("5a117ad9",content,!0,{sourceMap:!1})},595:function(t,e,o){t.exports=o.p+"img/info.772a869.png"},596:function(t,e,o){"use strict";o(577)},597:function(t,e,o){var r=o(7)(!1);r.push([t.i,".modal.show .modal-dialog[data-v-0b70a004]{transform:translate(0)}.modal.show[data-v-0b70a004]{background-color:rgba(0,0,0,.5)}",""]),t.exports=r},599:function(t,e,o){"use strict";var r={props:{thread:{type:Object,required:!0}},data:function(){return{share_on_facebook:!1,share_on_twitter:!1}},methods:{shareThread:function(){var t=this;this.$axios.post("threads/".concat(this.thread.slug,"/share"),{share_on_facebook:this.share_on_facebook,share_on_twitter:this.share_on_twitter}).then((function(e){t.$emit("share-complete")})).catch((function(t){}))},closeShareModal:function(){this.$emit("share-cancel")},hideShareModal:function(){this.$emit("hide-share-modal")},skip:function(){var t=this;this.$axios.$put("threads/".concat(this.thread.slug,"/skipThumbnailEdit")).then((function(e){t.$emit("share-cancel")}))}}},n=(o(596),o(3)),component=Object(n.a)(r,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"modal fade show",staticStyle:{display:"block"},attrs:{id:"shareThreadModal",tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel"}},[o("div",{staticClass:"modal-dialog modal-sm",attrs:{role:"document"}},[o("div",{staticClass:"modal-content"},[o("div",{staticClass:"modal-header"},[o("h4",{staticClass:"modal-title",attrs:{id:"myModalLabel"}},[t._v("\n          Share article on social media\n        ")]),t._v(" "),o("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return e.preventDefault(),t.hideShareModal.apply(null,arguments)}}},[o("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),t._v(" "),o("div",{staticClass:"modal-body"},[o("div",{staticClass:"form-group"},[o("div",{staticClass:"checkbox"},[o("label",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.share_on_facebook,expression:"share_on_facebook"}],attrs:{type:"checkbox",value:"1",name:"share_on_facebook"},domProps:{checked:Array.isArray(t.share_on_facebook)?t._i(t.share_on_facebook,"1")>-1:t.share_on_facebook},on:{change:function(e){var o=t.share_on_facebook,r=e.target,n=!!r.checked;if(Array.isArray(o)){var c=t._i(o,"1");r.checked?c<0&&(t.share_on_facebook=o.concat(["1"])):c>-1&&(t.share_on_facebook=o.slice(0,c).concat(o.slice(c+1)))}else t.share_on_facebook=n}}}),t._v("Share on Facebook")])]),t._v(" "),o("div",{staticClass:"checkbox"},[o("label",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.share_on_twitter,expression:"share_on_twitter"}],attrs:{type:"checkbox",value:"1",name:"share_on_twitter"},domProps:{checked:Array.isArray(t.share_on_twitter)?t._i(t.share_on_twitter,"1")>-1:t.share_on_twitter},on:{change:function(e){var o=t.share_on_twitter,r=e.target,n=!!r.checked;if(Array.isArray(o)){var c=t._i(o,"1");r.checked?c<0&&(t.share_on_twitter=o.concat(["1"])):c>-1&&(t.share_on_twitter=o.slice(0,c).concat(o.slice(c+1)))}else t.share_on_twitter=n}}}),t._v("Share on Twitter")])])])]),t._v(" "),o("div",{staticClass:"modal-footer"},[o("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.closeShareModal.apply(null,arguments)}}},[t._v("\n          Skip\n        ")]),t._v(" "),o("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.shareThread.apply(null,arguments)}}},[t._v("\n          Share\n        ")])])])])])}),[],!1,null,"0b70a004",null),c=component.exports;e.a={components:{ShareModal:c},data:function(){return{show_share_modal:!1}},methods:{cancelShare:function(t){this.show_share_modal=!1,this.$router.push({name:"threads.show",params:{slug:t.slug}})},completeShare:function(t){this.show_share_modal=!1,this.$router.push({name:"threads.show",params:{slug:t.slug}})}},computed:{}}},629:function(t,e,o){"use strict";o(17),o(15),o(11),o(24),o(25);var r=o(6),n=(o(35),o(28)),c=o(672),l=o.n(c),d=(o(673),o(674)),m=o(10),h=o(9);function f(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,r)}return o}function v(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?f(Object(o),!0).forEach((function(e){Object(r.a)(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):f(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}e.a={components:{vSelect:l.a,Typeahead:d.a,BaseButton:h.a,BaseInput:m.a},watch:{title_case:function(t,e){this.form.title_case=t}},data:function(){return{config:{height:300,extraAllowedContent:"iframe[*]",contentsCss:["body {font-size: 22px;}","blockquote { display: block !important;}","blockquote { margin-block-start: 1em !important;}","blockquote { margin-block-end: 1em !important;}","blockquote { margin-inline-start: 40px !important;}","blockquote { margin-inline-end: 40px !important;}"],scayt_autoStartup:!0},alltags:[],errors:[],show_more_fields:!0,form:this.$vform({channel:"",tags:"",title:"",title_case:!0,body:"",source:"",location:"",cno:{famous:!1,celebrity:!1},main_subject:"",scrape_image:!1,age_restriction:0,anonymous:0,slide_body:"",slide_image_pos:"",slide_color_bg:"",slide_color_0:"",slide_color_1:"",slide_color_2:"",copy_cno:!1})}},computed:v(v({},Object(n.c)({settings:"settings"})),{},{allchannels:function(){return this.$store.state.channels},showImportWikipediaTooltip:function(){return!this.form.scrape_image},tooltipText:function(){return"If you check this box and enter a subject above, we will try to download the corresponding Wikipedia image and display it above your story. Alternatively, you will have the option to use a different primary image on the next page."}}),mounted:function(){this.form.title_case=this.title_case},methods:{selecetdTag:function(){var t=this.form.tags.map((function(t){return t.toLowerCase()}));this.form.tags=t},searchTag:function(t,e){var o=this;e(!0),this.$axios.$get("tag/search?q=".concat(t)).then((function(t){o.alltags=t,e(!1)}))},searchChannel:function(t,e){this.$axios.$get("channel/search?name=".concat(t)).then((function(t){e(t)})).catch((function(t){}))}}}},676:function(t,e,o){var content=o(783);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(8).default)("278c7828",content,!0,{sourceMap:!1})},782:function(t,e,o){"use strict";o(676)},783:function(t,e,o){var r=o(7)(!1);r.push([t.i,".thread-thumb-placeholder[data-v-4ba645de]{width:150px;height:150px;background-color:#eee}#tinymce iframe[data-v-4ba645de]{width:100%!important;height:350px!important}.tox-tinymce[data-v-4ba645de]{min-height:500px!important}.error[data-v-4ba645de],.help-block.error[data-v-4ba645de]{color:red}.uiv .dropdown-menu>.active>a[data-v-4ba645de],.uiv .dropdown-menu>.active>a[data-v-4ba645de]:focus,.uiv .dropdown-menu>.active>a[data-v-4ba645de]:hover{color:#fff;text-decoration:none;background-color:#337ab7;outline:0}dropdown-menu[data-v-4ba645de]{position:absolute;top:100%;left:0;z-index:1000;display:none;float:left;min-width:10rem;padding:.5rem 0;margin:.125rem 0 0;font-size:1rem;color:#212529;text-align:left;list-style:none;background-color:#38a9ff;background-clip:padding-box;border:1px solid rgba(0,0,0,.15);border-radius:.25rem}.thread-body[data-v-4ba645de]{width:100%;height:100%}body.cke_editable.cke_editable_themed.cke_contents_ltr.cke_show_borders[data-v-4ba645de]{font-size:20px!important}.svg-inline--fa path[data-v-4ba645de]{fill:currentColor}.card-title[data-v-4ba645de]{font-size:24px;font-weight:700}.big-label[data-v-4ba645de]{line-height:32px;font-weight:700;font-size:20px}span.import_wikipedia_image_checkbox[data-v-4ba645de]{display:inline-flex;align-items:center}span.import_wikipedia_image_checkbox img[data-v-4ba645de]{margin-left:5px}",""]),t.exports=r}}]);