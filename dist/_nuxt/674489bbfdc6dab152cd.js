(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{112:function(t,e,n){"use strict";n.r(e);var r=[function(){var t=this._self._c;return t("div",{staticClass:"loading-box"},[t("img",{attrs:{src:n(610),alt:""}})])}],o=(n(22),n(20),n(9),n(29),n(30),n(1)),c=n(5),l=(n(6),n(597)),d=n(32),f=n(598),h=n(10),m=n(11);function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){Object(c.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var _={name:"bookbuilder.index",watchQuery:!0,components:{Pagination:l.a,VueCkeditor:f.a,BaseButton:h.a,BaseInput:m.a},computed:y(y({},Object(d.c)({pageinateData:"bookbuilder/pageinateData",threads:"bookbuilder/threads",loading:"bookbuilder/loading"})),{},{thread:function(){return this.threads.length?this.threads[0]:{}}}),data:function(){return{config:{height:300,extraAllowedContent:"iframe[*]",contentsCss:["body {font-size: 22px;}","blockquote { display: block !important;}","blockquote { margin-block-start: 1em !important;}","blockquote { margin-block-end: 1em !important;}","blockquote { margin-inline-start: 40px !important;}","blockquote { margin-inline-end: 40px !important;}"],scayt_autoStartup:!0},errors:[],form:this.$vform({title:"",body:"",source:""})}},fetch:function(t){return Object(o.a)(regeneratorRuntime.mark((function e(){var n,r,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.params,r=t.query,t.app,t.$axios,o=t.store,t.redirect,e.prev=1,c=n.term,e.next=5,o.dispatch("bookbuilder/getThreads",{term:c,query:r});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))()},mounted:function(){this.form.title=this.thread.title,this.form.body=this.thread.body,this.form.source=this.thread.source},methods:y(y({},Object(d.b)({})),{},{setFormData:function(){this.form.title=this.thread.title,this.form.body=this.thread.body,this.form.source=this.thread.source},skip:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.pageinateData.next_page_url){e.next=2;break}return e.abrupt("return");case 2:return n=t.pageinateData.current_page+1,r=t.$route.params.term,e.next=6,t.$store.dispatch("bookbuilder/getThreads",{term:r,query:y(y({},t.$route.query),{},{page:n})});case 6:t.setFormData();case 7:case"end":return e.stop()}}),e)})))()},update:function(){this.$axios.$put("admin/bookbuilder/".concat(this.thread.slug),this.form).then((function(t){console.log(t)}))},add:function(){var t=this,e=this.$route.params.term;this.$axios.$post("admin/bookbuilder/".concat(this.thread.slug),{term:e}).then((function(e){t.skip()}))},reset:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.$route.params.term,e.next=4,t.$axios.$delete("admin/bookbuilder/".concat(n,"/reset"),{term:n});case 4:return e.next=6,t.$store.dispatch("bookbuilder/getThreads",{term:n,query:y(y({},t.$route.query),{},{page:1})});case 6:t.setFormData(),t.$toast.open({type:"success",position:"top-right",message:"Bookbuilder reset Successfully"}),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})))()},getFile:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,r,o,c,link;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.$route.params.term,e.next=4,t.$axios({url:"admin/bookbuilder/".concat(n,"/get-file"),method:"GET",responseType:"blob"});case 4:r=e.sent,o=n+".txt",c=window.URL.createObjectURL(new Blob([r.data])),(link=document.createElement("a")).href=c,link.setAttribute("download",o),document.body.appendChild(link),link.click(),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(0);case 16:case"end":return e.stop()}}),e,null,[[0,14]])})))()}})},k=(n(761),n(3)),component=Object(k.a)(_,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("div"),t._v(" "),t.loading?[t._m(0)]:t._e(),t._v(" "),e("div",{staticClass:"card card-m-5"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"row mb-3"},[e("div",{staticClass:"col-md-6"},[e("button",{staticClass:"btn btn-danger",on:{click:function(e){return e.preventDefault(),t.reset.apply(null,arguments)}}},[t._v("RESET")])]),t._v(" "),e("div",{staticClass:"col-md-6 d-flex justify-content-end"},[t.pageinateData.next_page_url?e("button",{staticClass:"btn btn-primary ml-auto",on:{click:function(e){return e.preventDefault(),t.skip.apply(null,arguments)}}},[t._v("SKIP")]):t._e(),t._v(" "),e("button",{staticClass:"btn btn-success ml-auto",on:{click:function(e){return e.preventDefault(),t.add.apply(null,arguments)}}},[t._v("ADD")])])]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"form-group",class:{"has-error":t.errors.title}},[e("label",{staticClass:"control-label",attrs:{for:"title"}},[t._v("Title (required)")]),t._v(" "),e("BaseInput",{attrs:{form:t.form,field:"title",id:"title",placeholder:"Enter Thread Title",inputType:"text"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1)])]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"form-group thread-body",class:{"is-invalid":t.form.errors.errors.body}},[e("label",{staticClass:"control-label",attrs:{for:"body"}},[t._v("Your Story (required)")]),t._v(" "),e("vue-ckeditor",{attrs:{config:t.config},model:{value:t.form.body,callback:function(e){t.$set(t.form,"body",e)},expression:"form.body"}}),t._v(" "),t.form.errors.errors.body?e("p",{staticClass:"text-danger"},[t._v("\n                  "+t._s(t.form.errors.errors.body[0])+"\n                ")]):t._e()],1),t._v(" "),e("div",{staticClass:"form-group"},[e("has-error",{attrs:{form:t.form,field:"body"}})],1)])]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label",attrs:{for:"source"}},[t._v("Source")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.source,expression:"form.source"}],staticClass:"form-control",attrs:{type:"text",name:"source",id:"source"},domProps:{value:t.form.source},on:{input:function(e){e.target.composing||t.$set(t.form,"source",e.target.value)}}}),t._v(" "),e("span",{staticClass:"help-block"},[t._v("\n                  Where did you hear this story? If this story was reported on\n                  a website or other publication please list it here\n                  (<i> <a> tags are allowed).")])])])])])]),t._v(" "),e("div",{staticClass:"mt-3 d-flex justify-content-between"},[e("button",{staticClass:"btn btn-success",on:{click:function(e){return e.preventDefault(),t.update.apply(null,arguments)}}},[t._v("SAVE")]),t._v(" "),e("button",{staticClass:"btn btn-primary ml-auto",on:{click:function(e){return e.preventDefault(),t.getFile.apply(null,arguments)}}},[t._v("GETFILE")])])],2)])])}),r,!1,null,"3e6b5cbf",null);e.default=component.exports},597:function(t,e,n){"use strict";n(22),n(20),n(9),n(29),n(30);var r=n(5),o=n(32);function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var d={props:{pagination:{type:Object,required:!0},routeName:{type:String,required:!0},param:{type:Object,required:!0}},data:function(){return{limit:4}},computed:l(l({},Object(o.c)({q:"pagination/q"})),{},{pages:function(){for(var t=[],i=1;i<=this.pagination.last_page;i++)t.push(i);return t},links:function(){var t=[1,"..."],e=["...",this.pagination.last_page],n=[];return this.pagination.current_page<=this.limit?(n=this.range(1,this.limit+1),this.pagination.current_page+n.length<=this.pagination.last_page?n.concat(e):n):this.pagination.current_page>this.pagination.last_page-this.limit?(n=this.range(this.pagination.last_page-this.limit,this.pagination.last_page),this.pagination.current_page-n.length>=1?t.concat(n):n):(n=this.range(this.pagination.current_page-Math.ceil(this.limit/2),this.pagination.current_page+Math.ceil(this.limit/2)),t.concat(n).concat(e))},next:function(){var t=this.pagination.current_page+1;return t<=this.pagination.last_page&&t},prev:function(){return this.pagination.current_page-1},show:function(){return this.pagination.last_page>1}}),methods:{getRelation:function(link){return this.pagination.current_page-1==link?"next":this.pagination.current_page+1==link?"prev":this.pagination.current_page==link&&"canonical"},range:function(t,e){for(var n=[],i=t-1;i<e;i++)this.pages[i]&&n.push(this.pages[i]);return n},go:function(t){isNaN(t)},goToFirstPage:function(){var t={};t[this.param.key]=this.param.value,console.log(t),this.$router.push({name:this.routeName,params:t,query:l({},this.q)})},goToPage:function(link){var t={};t[this.param.key]=this.param.value,this.$router.push({name:this.routeName,params:t,query:l({page:link},this.q)}),document.body.scrollTop=0,document.documentElement.scrollTop=0}}},f=n(3),component=Object(f.a)(d,(function(){var t=this,e=t._self._c;return e("nav",[t.show?e("ul",{staticClass:"pagination"},[e("li",{staticClass:"page-item",class:{disabled:!t.prev}},[e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.goToPage(1)}}},[t._m(0)])]),t._v(" "),t._l(t.links,(function(link,n){return e("li",{key:n,staticClass:"page-item",class:{active:t.pagination.current_page==link,disabled:isNaN(link)}},[e("a",1==link?{staticClass:"page-link",attrs:{rel:t.getRelation(link),href:"#"},on:{click:function(e){return e.preventDefault(),t.goToPage(1)}}}:{staticClass:"page-link",attrs:{rel:t.getRelation(link),href:"?page=".concat(link)},on:{click:function(e){return e.preventDefault(),t.goToPage(link)}}},[e("span",[e("span",[t._v(t._s(link))])])])])})),t._v(" "),e("li",{staticClass:"page-item",class:{disabled:!t.next}},[e("a",{staticClass:"page-link",attrs:{href:"?page=".concat(t.pagination.last_page)},on:{click:function(e){return e.preventDefault(),t.goToPage(t.pagination.last_page)}}},[t._m(1)])])],2):t._e(),t._v(" "),t.pagination.total<1||null==t.pagination.from?e("div",{staticClass:"alert alert-danger card-m-5"},[t._v("\n    No Results Found\n  ")]):t._e()])}),[function(){var t=this._self._c;return t("span",[t("span",[this._v("«")])])},function(){var t=this._self._c;return t("span",[t("span",[this._v("»")])])}],!1,null,null,null);e.a=component.exports},598:function(t,e,n){"use strict";var r=(new Date).getTime();e.a=function(t,e,n,i,s,r,a,o){"boolean"!=typeof a&&(o=a,a=!1);var u,c=n;if(t&&t.render&&(c.render=t.render,c.staticRenderFns=t.staticRenderFns,c._compiled=!0),u)if(c.functional){var l=c.render;c.render=function(t,e){return u.call(e),l(t,e)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,u):[u]}return n}({render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"ckeditor"},[e("textarea",{attrs:{name:this.name,id:this.id,types:this.types,config:this.config,disabled:this.readOnlyMode},domProps:{value:this.value}})])},staticRenderFns:[]},0,{name:"VueCkeditor",props:{name:{type:String,default:function(){return"editor-".concat(++r)}},value:{type:String},id:{type:String,default:function(){return"editor-".concat(r)}},types:{type:String,default:function(){return"classic"}},config:{type:Object,default:function(){}},instanceReadyCallback:{type:Function},readOnlyMode:{type:Boolean,default:function(){return!1}}},data:function(){return{instanceValue:""}},computed:{instance:function(){return CKEDITOR.instances[this.id]}},watch:{value:function(t){try{this.instance&&this.update(t)}catch(t){}},readOnlyMode:function(t){this.instance.setReadOnly(t)}},mounted:function(){this.create()},methods:{create:function(){var t=this;"undefined"==typeof CKEDITOR?console.log("CKEDITOR is missing (http://ckeditor.com/)"):("inline"===this.types?CKEDITOR.inline(this.id,this.config):CKEDITOR.replace(this.id,this.config),this.instance.setData(this.value),this.instance.on("instanceReady",(function(){t.instance.setData(t.value)})),this.instance.on("change",this.onChange),this.instance.on("mode",this.onMode),this.instance.on("blur",(function(e){t.$emit("blur",e)})),this.instance.on("focus",(function(e){t.$emit("focus",e)})),this.instance.on("contentDom",(function(e){t.$emit("contentDom",e)})),CKEDITOR.on("dialogDefinition",(function(e){t.$emit("dialogDefinition",e)})),this.instance.on("fileUploadRequest",(function(e){t.$emit("fileUploadRequest",e)})),this.instance.on("fileUploadResponse",(function(e){setTimeout((function(){t.onChange()}),0),t.$emit("fileUploadResponse",e)})),void 0!==this.instanceReadyCallback&&this.instance.on("instanceReady",this.instanceReadyCallback),this.$once("hook:beforeDestroy",(function(){t.destroy()})))},update:function(t){this.instanceValue!==t&&(this.instance.setData(t,{internal:!1}),this.instanceValue=t)},destroy:function(){try{var t=window.CKEDITOR;t.instances&&t.instances[this.id]&&t.instances[this.id].destroy()}catch(t){}},onMode:function(){var t=this;if("source"===this.instance.mode){var e=this.instance.editable();e.attachListener(e,"input",(function(){t.onChange()}))}},onChange:function(){var t=this.instance.getData();t!==this.value&&(this.$emit("input",t),this.instanceValue=t)}}},0,0,0,void 0,void 0)},610:function(t,e,n){t.exports=n.p+"img/loading.838bb90.gif"},679:function(t,e,n){var content=n(762);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(8).default)("2c254608",content,!0,{sourceMap:!1})},761:function(t,e,n){"use strict";n(679)},762:function(t,e,n){var r=n(7)((function(i){return i[1]}));r.push([t.i,".thread-thumbnail[data-v-3e6b5cbf]{display:flex;justify-content:center}.image_description[data-v-3e6b5cbf]{align-items:inherit;display:inherit;flex-wrap:wrap;font-size:14px;justify-content:inherit;padding:5px;text-align:center;width:100%}.loading-box[data-v-3e6b5cbf]{align-items:center;display:flex;justify-content:center;margin-top:20vh}",""]),r.locals={},t.exports=r}}]);