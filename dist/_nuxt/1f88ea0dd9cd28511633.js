(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{387:function(t,e,c){"use strict";c.r(e);c(18);var n=c(57),r=c.n(n),o={name:"BackupComponent",middleware:["auth","admin"],data:function(){return{backups:[],loading:!1}},methods:{fetchBackups:function(){var t=this;r.a.get("https://anecdotage.com/api/allbackups").then((function(e){t.backups=e.data})).catch((function(t){return console.error("Error fetching backups:",t)}))},createBackup:function(t){var e=this,c="database"===t?"https://anecdotage.com/api/run-backup":"public"===t?"https://anecdotage.com/api/backup-public":"https://anecdotage.com/api/Full-project";this.loading=!0,r.a.get(c).then((function(t){alert(t.data.message),e.fetchBackups()})).catch((function(t){return console.error("Error creating backup:",t)})).finally((function(){return e.loading=!1}))},downloadBackup:function(t){window.location.href="https://anecdotage.com/api/backups/download/".concat(t)},deleteBackup:function(t){var e=this;confirm("Are you sure you want to delete this backup?")&&r.a.delete("https://anecdotage.com/api/backups/delete/".concat(t)).then((function(t){alert(t.data.message),e.fetchBackups()})).catch((function(t){return console.error("Error deleting backup:",t)}))},formatDate:function(t){return new Date(t).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}},mounted:function(){this.fetchBackups()}},l=(c(728),c(3)),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,c=t._self._c||e;return c("div",{staticClass:"container my-5"},[c("div",{staticClass:"card shadow-lg rounded-lg p-4"},[c("h1",{staticClass:"text-center mb-4"},[t._v("Backup Database Dumps")]),t._v(" "),c("div",{staticClass:"card-body"},[c("button",{staticClass:"btn btn-primary mb-4 float-right mx-1",attrs:{disabled:t.loading},on:{click:function(e){return t.createBackup("database")}}},[c("i",{staticClass:"fas fa-cogs"}),t._v(" Database Backup\n      ")]),t._v(" "),c("button",{staticClass:"btn btn-primary mb-4 float-right mx-1",attrs:{disabled:t.loading},on:{click:function(e){return t.createBackup("public")}}},[c("i",{staticClass:"fas fa-cogs"}),t._v(" Public Backup\n      ")]),t._v(" "),c("button",{staticClass:"btn btn-primary mb-4 float-right mx-1",attrs:{disabled:t.loading},on:{click:function(e){return t.createBackup("fullproject")}}},[c("i",{staticClass:"fas fa-cogs"}),t._v(" Full Project Backup\n      ")]),t._v(" "),t.loading?c("div",{staticClass:"text-center"},[t._m(0)]):t._e(),t._v(" "),c("table",{staticClass:"table table-striped table-bordered table-hover"},[t._m(1),t._v(" "),c("tbody",[t._l(t.backups,(function(e,n){return c("tr",{key:e.id},[c("td",[t._v(t._s(n+1))]),t._v(" "),c("td",[t._v(t._s(e.filename))]),t._v(" "),c("td",[t._v(t._s(e.type))]),t._v(" "),c("td",{staticClass:"text-left"},[t._v(t._s(t.formatDate(e.created_at)))]),t._v(" "),c("td",{staticClass:"text-left"},[t._v(t._s(t.formatDate(e.updated_at)))]),t._v(" "),c("td",{staticClass:"text-center"},[c("div",{staticStyle:{display:"flex",gap:"10px","justify-content":"center"}},[c("button",{staticClass:"btn btn-sm btn-primary",on:{click:function(c){return t.downloadBackup(e.id)}}},[c("i",{staticClass:"fas fa-download"}),t._v(" Download\n                ")]),t._v(" "),c("button",{staticClass:"btn btn-sm btn-danger",on:{click:function(c){return t.deleteBackup(e.filename)}}},[c("i",{staticClass:"fas fa-trash-alt"}),t._v(" Delete\n                ")])])])])})),t._v(" "),0===t.backups.length?c("tr",[c("td",{staticClass:"text-center",attrs:{colspan:"6"}},[t._v("No backups available.")])]):t._e()],2)])])])])}),[function(){var t=this,e=t.$createElement,c=t._self._c||e;return c("div",{staticClass:"spinner-border text-primary",attrs:{role:"status"}},[c("span",{staticClass:"visually-hidden"},[t._v("Loading")])])},function(){var t=this,e=t.$createElement,c=t._self._c||e;return c("thead",{staticClass:"thead-dark"},[c("tr",[c("th",[t._v("#")]),t._v(" "),c("th",[t._v("Backup File")]),t._v(" "),c("th",[t._v("Type")]),t._v(" "),c("th",{staticClass:"text-left"},[t._v("Created At")]),t._v(" "),c("th",{staticClass:"text-left"},[t._v("Updated At")]),t._v(" "),c("th",{staticClass:"text-center"},[t._v("Action")])])])}],!1,null,"91c4283c",null);e.default=component.exports},648:function(t,e,c){var content=c(729);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,c(8).default)("1590e09a",content,!0,{sourceMap:!1})},728:function(t,e,c){"use strict";c(648)},729:function(t,e,c){var n=c(7)(!1);n.push([t.i,".spinner-border[data-v-91c4283c]{width:5rem;height:5rem}.mb-4[data-v-91c4283c]{margin-bottom:1.5rem}.text-left[data-v-91c4283c]{text-align:left}.text-center[data-v-91c4283c]{text-align:center}.table[data-v-91c4283c]{width:100%;border-collapse:collapse}.table td[data-v-91c4283c],.table th[data-v-91c4283c]{padding:8px;text-align:left}.table-striped tbody tr[data-v-91c4283c]:nth-child(odd){background-color:#f9f9f9}.table-bordered td[data-v-91c4283c],.table-bordered th[data-v-91c4283c]{border:1px solid #ddd}",""]),t.exports=n}}]);