(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{728:function(t,e,n){var content=n(860);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(8).default)("1d2cbc93",content,!0,{sourceMap:!1})},859:function(t,e,n){"use strict";n(728)},860:function(t,e,n){var o=n(7)((function(i){return i[1]}));o.push([t.i,".single-reply[data-v-96d8ab12]{margin:5px}.comment-body[data-v-96d8ab12]{resize:vertical!important}.reply_created_at[data-v-96d8ab12]{color:#92959e;font-size:12px;font-style:italic;margin-right:10px}.reply-body[data-v-96d8ab12]{color:#92959e;margin-left:20px;margin-top:-5px;padding:0}.nested-reply-btn[data-v-96d8ab12]{margin-left:10px}.more-reply[data-v-96d8ab12]{margin-left:5x}.add-nested-reply-btn[data-v-96d8ab12]{color:#92959e}.add-nested-reply-btn[data-v-96d8ab12]:hover{color:#92959e;-webkit-text-decoration:none;text-decoration:none}.add-nested-reply-btn[data-v-96d8ab12]:focus{outline:none;-webkit-text-decoration:none;text-decoration:none}.reply-edit-delete-btn[data-v-96d8ab12]{display:flex;justify-content:flex-end}.show-nested-replies-btn[data-v-96d8ab12]{color:#92959e}.show-nested-replies-btn[data-v-96d8ab12]:focus{outline:none;-webkit-text-decoration:none;text-decoration:none}.show-nested-replies-btn[data-v-96d8ab12]:hover{color:#92959e;-webkit-text-decoration:none;text-decoration:none}.glyphicon-triangle-bottom[data-v-96d8ab12],.glyphicon-triangle-top[data-v-96d8ab12]{font-size:10px;margin-right:5px}.btn-xs[data-v-96d8ab12]{border-radius:3px;font-size:12px;line-height:1.5;padding:1px 5px}.avatar-photo[data-v-96d8ab12]{border-radius:50%;height:40px;margin-right:10px;vertical-align:middle;width:40px}.creator_name[data-v-96d8ab12]{color:#ff4301}a.creator_name[data-v-96d8ab12]{align-items:center;display:flex;justify-content:normal}a.creator_name *[data-v-96d8ab12]{margin-right:5px}.thread_creator[data-v-96d8ab12]{align-items:center;color:#ff4301;display:flex;justify-content:normal}.reply-heading[data-v-96d8ab12]{display:flex;justify-content:space-between}.more-reply[data-v-96d8ab12]{margin-left:5px}button.btn.btn-link.add-nested-reply-btn[data-v-96d8ab12]{font-size:12px;padding:0 5px}",""]),o.locals={},t.exports=o},861:function(t,e,n){"use strict";n.r(e);n(15),n(9);var o=n(0),d=n.n(o),r=n(145),l=n(596),c={props:["reply"],name:"nestedReplies",mixins:[r.a,l.a],components:{NestedReplies:function(){return Promise.resolve().then(n.bind(null,861))}},data:function(){return{editing:!1,id:this.reply.id,body:this.reply.body,editBody:this.reply.body,replies:[],replies_count:this.reply.replies_count,showNested:!1,addNested:!1,nestedbody:"",showLoadMore:!0}},created:function(){var t=this;this.$nuxt.$on("nested_delete-"+this.reply.id,(function(e){var n=t.replies.filter((function(t){return t.id!=e}));t.replies=n,t.replies_count=t.replies_count-1,t.$nuxt.$emit("nested_delete-"+t.reply.parent_id,t.reply.id)}))},computed:{ago:function(){return d()(this.reply.created_at,"YYYY-MM-DD HH:mm:ss").fromNow()+"..."},thread:function(){return this.$store.state.threads.thread},owns:function(){return!!this.signedIn&&this.$store.state.auth.user.id==this.reply.owner.id}},methods:{toggleNestedReplies:function(){this.showNested?this.showNested=!1:(this.loadNestedReply(),this.showNested=!0)},addReplySuggest:function(){},addNestedReplySuggest:function(){},loadNestedReply:function(){var t=this;this.$axios.$get("threads/".concat(this.thread.slug,"/replies/").concat(this.reply.id,"/childs")).then((function(e){t.replies=e})).catch((function(t){console.log(t)}))},update:function(){var t=this;this.$axios.$put("threads/".concat(this.thread.slug,"/replies/").concat(this.reply.id),{body:this.editBody}).then((function(e){t.body=t.editBody,t.editing=!1,t.$toast.open({type:"success",position:"bottom-right",message:"Reply Update Successfully"})})).catch((function(t){console.log(t)}))},destroy:function(){var t=this;this.replies_count>0?this.$toast.open({type:"warning",position:"top-right",message:"Your reply has many replies."}):this.$swal({title:"Are you sure?",icon:"warning",buttons:!0,dangerMode:!0}).then((function(e){e&&t.$axios.$delete("threads/".concat(t.thread.slug,"/replies/").concat(t.reply.id)).then((function(e){console.log("deleteing nested"),t.$nuxt.$emit("nested_delete-"+t.reply.parent_id,t.reply.id),t.$nuxt.$emit("commentDeleted-"+t.reply.thread_id),t.$toast.open({type:"success",position:"top-right",message:"Reply Delete Successfully."})})).catch((function(t){console.log(t)}))}))},addNestedReply:function(){var t=this;this.$axios.$post("threads/".concat(this.thread.slug,"/replies"),{parent_id:this.reply.id,body:this.nestedbody}).then((function(e){t.nestedbody="",t.replies.push(e),t.replies_count=t.replies_count+1,t.addNested=!1,t.showLoadMore=!0,t.showNested=!0,t.$nuxt.$emit("commentAdded-"+t.reply.thread_id),t.$toast.open({type:"success",position:"top-right",message:"Reply Add Successfully"})})).catch((function(t){console.log(t)}))}}},y=(n(859),n(3)),component=Object(y.a)(c,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"single-reply",attrs:{id:"reply-"+t.id}},[e("div",{staticClass:"row reply-heading"},[e("div",{staticClass:"thread_creator"},[e("nuxt-link",{staticClass:"creator_name",attrs:{to:{name:"profile.show",params:{username:t.reply.owner.username}}}},[e("img",{staticClass:"avatar-photo",attrs:{src:t.reply.owner.photo_url,alt:t.reply.owner.name,width:"25",height:"25"}}),t._v(" "),e("span",[t._v("\n\n            "+t._s(t.reply.owner.name)+"\n          ")])]),t._v(" "),e("span",{staticClass:"reply_created_at",domProps:{textContent:t._s(t.ago)}})],1),t._v(" "),t.isAdmin||t.owns?e("div",{staticClass:"col-md-4 reply-edit-delete-btn"},[e("div",{staticClass:"form-g"},[e("button",{staticClass:"btn btn-xs btn-primary",on:{click:function(e){t.editing=!0}}},[t._v("  Edit")]),t._v(" "),e("button",{staticClass:"btn btn-xs btn-danger",on:{click:t.destroy}},[t._v("Delete")])])]):t._e()]),t._v(" "),e("div",{staticClass:"row reply-body"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"reply-body",domProps:{innerHTML:t._s(t.body)}}),t._v(" "),e("div",{staticClass:"nested-reply-btn"},[e("button",{staticClass:"btn btn-link add-nested-reply-btn",on:{click:function(e){t.addNested=!0,t.showLoadMore=!1}}},[t._v("\n          Reply\n        ")]),t._v(" "),t.editing?e("div",{staticClass:"edit-reply"},[e("div",[e("form",{attrs:{action:""},on:{submit:function(e){return e.preventDefault(),t.update.apply(null,arguments)}}},[e("div",{staticClass:"form-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.editBody,expression:"editBody"}],staticClass:"form-control",attrs:{type:"text","aria-label":"...",id:"bodyedit-"+t.reply.id,placeholder:"Add a comment"},domProps:{value:t.editBody},on:{keyup:t.addReplySuggest,input:function(e){e.target.composing||(t.editBody=e.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group"},[e("button",{staticClass:"btn btn-primary btn-xs",attrs:{type:"submit"}},[t._v("\n                  Save\n                ")]),t._v(" "),e("button",{staticClass:"btn btn-danger btn-xs",on:{click:function(e){t.editing=!1}}},[t._v("\n                  Cancel\n                ")])])])])]):t._e(),t._v(" "),t.addNested?e("div",{staticClass:"edit-reply"},[e("div",[e("form",{attrs:{action:""},on:{submit:function(e){return e.preventDefault(),t.addNestedReply.apply(null,arguments)}}},[e("div",{staticClass:"form-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.nestedbody,expression:"nestedbody"}],staticClass:"form-control",attrs:{type:"text","aria-label":"...",id:"addNested-"+t.reply.id,placeholder:"Add a comment"},domProps:{value:t.nestedbody},on:{keyup:t.addNestedReplySuggest,input:function(e){e.target.composing||(t.nestedbody=e.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group"},[e("button",{staticClass:"btn btn-primary btn-xs",attrs:{type:"submit"}},[t._v("\n                  Add\n                ")]),t._v(" "),e("button",{staticClass:"btn btn-danger btn-xs",on:{click:function(e){t.addNested=!1,t.showLoadMore=!0}}},[t._v("\n                  Cancel\n                ")])])])])]):t._e()]),t._v(" "),t.showLoadMore&&t.replies_count>0?e("div",{staticClass:"more-reply"},[e("button",{staticClass:"btn btn-xs btn-link show-nested-replies-btn",on:{click:t.toggleNestedReplies}},[t.showNested?e("div",[e("span",{staticClass:"glyphicon glyphicon-triangle-top"}),t._v(" Hide Reply\n          ")]):e("div",[e("span",{staticClass:"glyphicon glyphicon-triangle-bottom"}),t._v("\n            "+t._s("View ".concat(t.replies_count," Reply"))+"\n          ")])]),t._v(" "),t.showNested?t._l(t.replies,(function(t,n){return e("NestedReplies",{key:n,attrs:{reply:t}})})):t._e()],2):t._e()])])])}),[],!1,null,"96d8ab12",null);e.default=component.exports}}]);