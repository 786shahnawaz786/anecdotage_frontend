(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{389:function(t,e,r){"use strict";r.r(e);var o=r(1),n=(r(17),r(5),{middleware:["auth","admin"],data:function(){return{form:{title:"",main_subject:"",book_number:"",author_name:"",publisher_date:"",cover_image:null,file_attachment_epub:null,file_attachment_pdf:null,file_attachment_txt:null},errors:{},downloadPin:""}},methods:{generateDownloadPin:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("https://anecdotage.com/api/generate-download-pin");case 3:r=e.sent,t.downloadPin=r.data.DownloadPin,e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error generating pin:",e.t0),t.errors.downloadPin=["Failed to generate download pin."];case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))()},handleFileChange:function(t,e){var r=e.target.files[0];this.form[t]=r||null},validateForm:function(){return this.errors={},this.form.title||(this.errors.title=["Title is required."]),this.form.main_subject||(this.errors.main_subject=["Main subject is required."]),this.form.book_number||(this.errors.book_number=["Book number is required."]),this.form.author_name||(this.errors.author_name=["Author name is required."]),this.form.publisher_date||(this.errors.publisher_date=["Publisher date is required."]),this.downloadPin||(this.errors.downloadPin=["Download pin is required."]),this.form.cover_image||(this.errors.cover_image=["Cover image is required."]),0===Object.keys(this.errors).length},submitForm:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r,o,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.validateForm()){e.next=5;break}return r=Object.keys(t.errors)[0],(o=document.getElementById(r))&&o.scrollIntoView({behavior:"smooth",block:"center"}),e.abrupt("return");case 5:return(n=new FormData).append("title",t.form.title),n.append("main_subject",t.form.main_subject),n.append("book_number",t.form.book_number),n.append("author_name",t.form.author_name),n.append("publisher_date",t.form.publisher_date),n.append("DownloadPin",t.downloadPin),t.form.cover_image&&n.append("cover_image",t.form.cover_image),t.form.file_attachment_epub&&n.append("file_attachment_epub",t.form.file_attachment_epub),t.form.file_attachment_pdf&&n.append("file_attachment_pdf",t.form.file_attachment_pdf),t.form.file_attachment_txt&&n.append("file_attachment_txt",t.form.file_attachment_txt),e.prev=16,e.next=19,t.$axios.post("https://anecdotage.com/api/books",n,{headers:{"Content-Type":"multipart/form-data"}});case 19:e.sent,alert("Book created successfully!"),t.resetForm(),t.$router.push("/books"),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(16),e.t0.response&&e.t0.response.data.errors?t.errors=e.t0.response.data.errors:alert("Error creating book.");case 28:case"end":return e.stop()}}),e,null,[[16,25]])})))()},resetForm:function(){this.form={title:"",main_subject:"",book_number:"",author_name:"",publisher_date:"",cover_image:null,file_attachment_epub:null,file_attachment_pdf:null,file_attachment_txt:null},this.errors={},this.downloadPin="",this.$refs.coverImageInput&&(this.$refs.coverImageInput.value=null),this.$refs.fileAttachmentEpubInput&&(this.$refs.fileAttachmentEpubInput.value=null),this.$refs.fileAttachmentPdfInput&&(this.$refs.fileAttachmentPdfInput.value=null),this.$refs.fileAttachmentTxtInput&&(this.$refs.fileAttachmentTxtInput.value=null)}}}),l=(r(734),r(3)),component=Object(l.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container my-5"},[r("div",{staticClass:"card shadow-lg rounded p-4"},[t._m(0),t._v(" "),r("div",{staticClass:"card-body"},[r("form",{on:{submit:function(e){return e.preventDefault(),t.submitForm.apply(null,arguments)}}},[r("div",{staticClass:"row mb-3"},[r("div",{staticClass:"col-12"},[r("div",{staticClass:"form-group"},[t._m(1),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.title,expression:"form.title"}],staticClass:"form-control",attrs:{id:"title",placeholder:"Enter Book Title",type:"text"},domProps:{value:t.form.title},on:{input:function(e){e.target.composing||t.$set(t.form,"title",e.target.value)}}}),t._v(" "),t.errors.title?r("div",{staticClass:"text-danger"},[t._v(t._s(t.errors.title[0]))]):t._e()])])]),t._v(" "),r("div",{staticClass:"row mb-3"},[r("div",{staticClass:"col-12"},[r("div",{staticClass:"form-group"},[t._m(2),t._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.main_subject,expression:"form.main_subject"}],staticClass:"form-control",attrs:{id:"main_subject",placeholder:"Enter the Main Subject",rows:"5"},domProps:{value:t.form.main_subject},on:{input:function(e){e.target.composing||t.$set(t.form,"main_subject",e.target.value)}}}),t._v(" "),t.errors.main_subject?r("div",{staticClass:"text-danger"},[t._v(t._s(t.errors.main_subject[0]))]):t._e()])])]),t._v(" "),r("div",{staticClass:"row mb-3"},[r("div",{staticClass:"col-md-4"},[r("div",{staticClass:"form-group"},[t._m(3),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.book_number,expression:"form.book_number"}],staticClass:"form-control",attrs:{id:"book_number",placeholder:"Enter Book Number",type:"text"},domProps:{value:t.form.book_number},on:{input:function(e){e.target.composing||t.$set(t.form,"book_number",e.target.value)}}}),t._v(" "),t.errors.book_number?r("div",{staticClass:"text-danger"},[t._v(t._s(t.errors.book_number[0]))]):t._e()])]),t._v(" "),r("div",{staticClass:"col-md-4"},[r("div",{staticClass:"form-group"},[t._m(4),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.author_name,expression:"form.author_name"}],staticClass:"form-control",attrs:{id:"author_name",placeholder:"Enter Author Name",type:"text"},domProps:{value:t.form.author_name},on:{input:function(e){e.target.composing||t.$set(t.form,"author_name",e.target.value)}}}),t._v(" "),t.errors.author_name?r("div",{staticClass:"text-danger"},[t._v(t._s(t.errors.author_name[0]))]):t._e()])]),t._v(" "),r("div",{staticClass:"col-md-4"},[r("div",{staticClass:"form-group"},[t._m(5),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.publisher_date,expression:"form.publisher_date"}],staticClass:"form-control",attrs:{id:"publisher_date",type:"date"},domProps:{value:t.form.publisher_date},on:{input:function(e){e.target.composing||t.$set(t.form,"publisher_date",e.target.value)}}}),t._v(" "),t.errors.publisher_date?r("div",{staticClass:"text-danger"},[t._v(t._s(t.errors.publisher_date[0]))]):t._e()])])]),t._v(" "),r("div",{staticClass:"row mb-3"},[r("div",{staticClass:"col-md-4"},[r("div",{staticClass:"form-group"},[t._m(6),t._v(" "),r("input",{ref:"coverImageInput",staticClass:"form-control",attrs:{type:"file"},on:{change:function(e){return t.handleFileChange("cover_image",e)}}}),t._v(" "),t.errors.cover_image?r("div",{staticClass:"text-danger"},[t._v(t._s(t.errors.cover_image[0]))]):t._e()])]),t._v(" "),r("div",{staticClass:"col-md-4"},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"form-label",attrs:{for:"file_attachment_epub"}},[t._v("EPUB File")]),t._v(" "),r("input",{ref:"fileAttachmentEpubInput",staticClass:"form-control",attrs:{type:"file"},on:{change:function(e){return t.handleFileChange("file_attachment_epub",e)}}}),t._v(" "),t.errors.file_attachment_epub?r("div",{staticClass:"text-danger"},[t._v(t._s(t.errors.file_attachment_epub[0]))]):t._e()])]),t._v(" "),r("div",{staticClass:"col-md-4"},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"form-label",attrs:{for:"file_attachment_pdf"}},[t._v("PDF File")]),t._v(" "),r("input",{ref:"fileAttachmentPdfInput",staticClass:"form-control",attrs:{type:"file"},on:{change:function(e){return t.handleFileChange("file_attachment_pdf",e)}}}),t._v(" "),t.errors.file_attachment_pdf?r("div",{staticClass:"text-danger"},[t._v(t._s(t.errors.file_attachment_pdf[0]))]):t._e()])]),t._v(" "),r("div",{staticClass:"col-md-4"},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"form-label",attrs:{for:"file_attachment_txt"}},[t._v("TXT File")]),t._v(" "),r("input",{ref:"fileAttachmentTxtInput",staticClass:"form-control",attrs:{type:"file"},on:{change:function(e){return t.handleFileChange("file_attachment_txt",e)}}}),t._v(" "),t.errors.file_attachment_txt?r("div",{staticClass:"text-danger"},[t._v(t._s(t.errors.file_attachment_txt[0]))]):t._e()])])]),t._v(" "),r("div",{staticClass:"row mb-3"},[r("div",{staticClass:"col-12"},[r("div",{staticClass:"form-group"},[t._m(7),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.downloadPin,expression:"downloadPin"}],staticClass:"form-control",attrs:{id:"downloadPin",placeholder:"Generated Pin will appear here",readonly:"",type:"text"},domProps:{value:t.downloadPin},on:{input:function(e){e.target.composing||(t.downloadPin=e.target.value)}}}),t._v(" "),t.errors.downloadPin?r("div",{staticClass:"text-danger"},[t._v(t._s(t.errors.downloadPin[0]))]):t._e(),t._v(" "),r("button",{staticClass:"btn btn-success mt-2",attrs:{type:"button"},on:{click:t.generateDownloadPin}},[t._v("\n                Generate Pin\n              ")])])])]),t._v(" "),t._m(8)])])])])}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card-header bg-primary text-white text-center rounded-top"},[r("h2",{staticClass:"card-title mb-0"},[t._v("Add Book")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("label",{staticClass:"form-label",attrs:{for:"title"}},[t._v("Title "),r("span",{staticClass:"text-danger"},[t._v("*")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("label",{staticClass:"form-label",attrs:{for:"main_subject"}},[t._v("Main Subject "),r("span",{staticClass:"text-danger"},[t._v("*")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("label",{staticClass:"form-label",attrs:{for:"book_number"}},[t._v("Book Number "),r("span",{staticClass:"text-danger"},[t._v("*")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("label",{staticClass:"form-label",attrs:{for:"author_name"}},[t._v("Author Name "),r("span",{staticClass:"text-danger"},[t._v("*")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("label",{staticClass:"form-label",attrs:{for:"publisher_date"}},[t._v("Publisher Date "),r("span",{staticClass:"text-danger"},[t._v("*")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("label",{staticClass:"form-label",attrs:{for:"cover_image"}},[t._v("Cover Image "),r("span",{staticClass:"text-danger"},[t._v("*")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("label",{staticClass:"form-label",attrs:{for:"downloadPin"}},[t._v("Generated Download Pin "),r("span",{staticClass:"text-danger"},[t._v("*")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"text-left mt-4"},[r("button",{staticClass:"btn btn-primary px-4 py-2 shadow-sm",attrs:{type:"submit"}},[t._v("\n            Submit\n          ")])])}],!1,null,"408689c2",null);e.default=component.exports},651:function(t,e,r){var content=r(735);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(8).default)("b7a784b8",content,!0,{sourceMap:!1})},734:function(t,e,r){"use strict";r(651)},735:function(t,e,r){var o=r(7)(!1);o.push([t.i,".table th[data-v-408689c2]{padding:.5rem}",""]),t.exports=o}}]);