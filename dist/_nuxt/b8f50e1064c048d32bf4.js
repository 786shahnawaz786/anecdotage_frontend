(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{422:function(e,t,r){"use strict";r.r(t);r(15);var o=r(1),l=(r(6),r(39),{data:function(){return{file:null,pin:"",loading:!1,progress:0,message:"",messageClass:"",detailedErrors:[],fileError:""}},methods:{handleFileChange:function(e){if(this.file=e.target.files[0],this.fileError="",this.message="",this.detailedErrors=[],this.file){var t=this.file.name.toLowerCase(),r=t.substring(t.lastIndexOf("."));return[".txt",".text"].includes(r)?void 0:(this.fileError="Only .txt files are allowed",this.file=null,void(e.target.value=""))}},uploadBatch:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.file){t.next=2;break}return t.abrupt("return");case 2:return e.loading=!0,e.progress=0,e.message="",(r=new FormData).append("batch_file",e.file),r.append("pin",e.pin),t.prev=8,t.next=11,e.$axios.post("http://localhost:8000/api/batch/process",r,{onUploadProgress:function(t){e.progress=Math.round(100*t.loaded/t.total)},headers:{"Content-Type":"multipart/form-data"}});case 11:o=t.sent,e.message=o.data.message,e.messageClass="success",e.file=null,e.pin="",e.progress=0,t.next=23;break;case 19:t.prev=19,t.t0=t.catch(8),t.t0.response?400===t.t0.response.status?(e.message=t.t0.response.data.error.pin[0]||"Validation error",e.detailedErrors=t.t0.response.data.errors||[],0===e.detailedErrors.length&&t.t0.response.data.message&&(e.detailedErrors=[t.t0.response.data.message])):(console.error(t.t0),e.message=t.t0.response.data.message||t.t0.response.data.error||"Error processing batch",e.detailedErrors=[]):(e.message="Network error or server unavailable",e.detailedErrors=[]),e.messageClass="error";case 23:return t.prev=23,e.loading=!1,e.$refs.fileInput.value="",t.finish(23);case 27:case"end":return t.stop()}}),t,null,[[8,19,23,27]])})))()}}}),n=(r(808),r(3)),component=Object(n.a)(l,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"batch-upload-container"},[t("div",{staticClass:"upload-card"},[e._m(0),e._v(" "),t("form",{staticClass:"upload-form",on:{submit:function(t){return t.preventDefault(),e.uploadBatch.apply(null,arguments)}}},[t("div",{staticClass:"form-group"},[e._m(1),e._v(" "),t("div",{staticClass:"file-input-wrapper"},[t("input",{ref:"fileInput",staticClass:"file-input",attrs:{type:"file",accept:".txt"},on:{change:e.handleFileChange}}),e._v(" "),t("button",{staticClass:"file-select-button",attrs:{type:"button"},on:{click:function(t){return e.$refs.fileInput.click()}}},[t("svg",{staticClass:"file-icon",attrs:{viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"}})]),e._v(" "),t("span",[e._v(e._s(e.file?e.file.name:"Choose a file..."))]),e._v(" "),e.fileError?t("div",{staticClass:"error-message"},[e._v(e._s(e.fileError))]):e._e()])])]),e._v(" "),t("div",{staticClass:"form-group"},[e._m(2),e._v(" "),t("div",{staticClass:"pin-input-wrapper"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.pin,expression:"pin"}],staticClass:"pin-input",attrs:{type:"password",required:""},domProps:{value:e.pin},on:{input:function(t){t.target.composing||(e.pin=t.target.value)}}}),e._v(" "),t("svg",{staticClass:"pin-icon",attrs:{viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M12,17A2,2 0 0,0 14,15C14,13.89 13.1,13 12,13A2,2 0 0,0 10,15A2,2 0 0,0 12,17M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V10C4,8.89 4.9,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z"}})])])]),e._v(" "),t("button",{staticClass:"submit-button",attrs:{type:"submit",disabled:!e.file||e.loading}},[e.loading?t("span",{staticClass:"button-loading"},[t("svg",{staticClass:"animate-spin h-5 w-5 mr-2",attrs:{viewBox:"0 0 24 24"}},[t("circle",{staticClass:"opacity-25",attrs:{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}}),e._v(" "),t("path",{staticClass:"opacity-75",attrs:{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"}})]),e._v("\n                    Processing...\n                ")]):t("span",[t("svg",{staticClass:"upload-icon",attrs:{viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M9,16V10H5L12,3L19,10H15V16H9M5,20V18H19V20H5Z"}})]),e._v("\n                    Upload Batch\n                ")])]),e._v(" "),e.progress?t("div",{staticClass:"progress-container"},[t("div",{staticClass:"progress-bar"},[t("div",{staticClass:"progress-fill",style:{width:"".concat(e.progress,"%")}})]),e._v(" "),t("div",{staticClass:"progress-text"},[e._v(e._s(e.progress)+"% uploaded")])]):e._e(),e._v(" "),e.message?t("div",{staticClass:"message-alert",class:e.messageClass},["success"===e.messageClass?t("svg",{staticClass:"alert-icon",attrs:{viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41 10.59L10 14.17L17.59 6.58L19 8L10 17Z"}})]):t("svg",{staticClass:"alert-icon",attrs:{viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"}})]),e._v(" "),t("div",{staticClass:"message-content"},[t("span",[e._v(e._s(e.message))]),e._v(" "),e.detailedErrors&&e.detailedErrors.length?t("ul",{staticClass:"error-details"},e._l(e.detailedErrors,(function(r,o){return t("li",{key:o},[e._v(e._s(r))])})),0):e._e()])]):e._e()])])])}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"upload-header"},[t("h1",{staticClass:"upload-title"},[e._v("Batch Story Upload")]),e._v(" "),t("p",{staticClass:"upload-subtitle"},[e._v("Upload multiple stories at once using a formatted text file")])])},function(){var e=this,t=e._self._c;return t("label",{staticClass:"form-label"},[t("span",{staticClass:"label-text"},[e._v("Batch File (TXT)")]),e._v(" "),t("span",{staticClass:"label-required"},[e._v("*")])])},function(){var e=this,t=e._self._c;return t("label",{staticClass:"form-label"},[t("span",{staticClass:"label-text"},[e._v("Admin PIN")]),e._v(" "),t("span",{staticClass:"label-required"},[e._v("*")])])}],!1,null,"6ad5bea4",null);t.default=component.exports},702:function(e,t,r){var content=r(809);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(8).default)("62dce0e2",content,!0,{sourceMap:!1})},808:function(e,t,r){"use strict";r(702)},809:function(e,t,r){var o=r(7)((function(i){return i[1]}));o.push([e.i,".batch-upload-container[data-v-6ad5bea4]{margin:2rem auto;max-width:600px;padding:1.1rem 1rem}.upload-card[data-v-6ad5bea4]{background:#fff;border-radius:12px;box-shadow:0 10px 25px rgba(0,0,0,.08);overflow:hidden;transition:transform .3s ease}.upload-card[data-v-6ad5bea4]:hover{transform:translateY(-2px)}.upload-header[data-v-6ad5bea4]{background:linear-gradient(135deg,#4f46e5,#7c3aed);color:#fff;padding:1.5rem 2rem}.upload-title[data-v-6ad5bea4]{font-size:1.5rem;font-weight:700;margin-bottom:.25rem}.upload-subtitle[data-v-6ad5bea4]{font-size:.875rem;opacity:.9}.upload-form[data-v-6ad5bea4]{padding:2rem}.form-group[data-v-6ad5bea4]{margin-bottom:1.5rem}.form-label[data-v-6ad5bea4]{align-items:center;color:#4b5563;display:flex;font-size:.875rem;font-weight:600;margin-bottom:.5rem}.label-text[data-v-6ad5bea4]{margin-right:.25rem}.label-required[data-v-6ad5bea4]{color:#ef4444}.file-input-wrapper[data-v-6ad5bea4]{position:relative}.file-input[data-v-6ad5bea4]{height:.1px;opacity:0;overflow:hidden;position:absolute;width:.1px;z-index:-1}.file-select-button[data-v-6ad5bea4]{align-items:center;background-color:#f9fafb;border:1px dashed #d1d5db;border-radius:8px;color:#4b5563;cursor:pointer;display:flex;font-size:.875rem;padding:.75rem 1rem;transition:all .2s ease;width:100%}.file-select-button[data-v-6ad5bea4]:hover{background-color:#f3f4f6;border-color:#9ca3af}.file-icon[data-v-6ad5bea4]{height:20px;margin-right:.75rem;width:20px;fill:#4f46e5}.pin-input-wrapper[data-v-6ad5bea4]{position:relative}.pin-input[data-v-6ad5bea4]{border:1px solid #e5e7eb;border-radius:8px;color:#1f2937;font-size:.875rem;padding:.75rem 1rem .75rem 2.5rem;transition:border-color .2s ease;width:100%}.pin-input[data-v-6ad5bea4]:focus{border-color:#4f46e5;box-shadow:0 0 0 3px rgba(79,70,229,.1);outline:none}.pin-icon[data-v-6ad5bea4]{height:20px;left:1rem;position:absolute;top:50%;transform:translateY(-50%);width:20px;fill:#9ca3af}.submit-button[data-v-6ad5bea4]{align-items:center;background:linear-gradient(135deg,#4f46e5,#7c3aed);border:none;border-radius:8px;color:#fff;cursor:pointer;display:flex;font-weight:600;justify-content:center;padding:.875rem 1rem;transition:all .2s ease;width:100%}.submit-button[data-v-6ad5bea4]:hover:not(:disabled){background:linear-gradient(135deg,#4338ca,#6d28d9);box-shadow:0 4px 6px rgba(79,70,229,.2)}.submit-button[data-v-6ad5bea4]:disabled{cursor:not-allowed;opacity:.7}.upload-icon[data-v-6ad5bea4]{height:20px;margin-right:.5rem;width:20px;fill:currentColor}.button-loading[data-v-6ad5bea4]{align-items:center;display:flex}.progress-container[data-v-6ad5bea4]{margin-top:1.5rem}.progress-bar[data-v-6ad5bea4]{background-color:#e5e7eb;border-radius:3px;height:6px;overflow:hidden}.progress-fill[data-v-6ad5bea4]{background:linear-gradient(90deg,#4f46e5,#7c3aed);border-radius:3px;height:100%;transition:width .3s ease}.progress-text[data-v-6ad5bea4]{color:#6b7280;font-size:.75rem;margin-top:.5rem;text-align:center}.message-alert[data-v-6ad5bea4]{align-items:center;border-radius:8px;display:flex;font-size:.875rem;margin-top:1.5rem;padding:.875rem 1rem}.message-alert.success[data-v-6ad5bea4]{background-color:#ecfdf5;border:1px solid #a7f3d0;color:#065f46}.message-alert.error[data-v-6ad5bea4]{background-color:#fef2f2;border:1px solid #fecaca;color:#b91c1c}.alert-icon[data-v-6ad5bea4]{flex-shrink:0;height:20px;margin-right:.75rem;width:20px}.message-alert.success .alert-icon[data-v-6ad5bea4]{fill:#10b981}.message-alert.error .alert-icon[data-v-6ad5bea4]{fill:#ef4444}.message-content[data-v-6ad5bea4]{display:flex;flex-direction:column}.error-details[data-v-6ad5bea4]{font-size:.8em;list-style-type:disc;margin-top:.5rem;padding-left:1.5rem}.error-details li[data-v-6ad5bea4]{margin-top:.25rem}",""]),o.locals={},e.exports=o}}]);