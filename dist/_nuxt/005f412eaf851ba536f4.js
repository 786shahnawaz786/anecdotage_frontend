(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{367:function(e,t,n){"use strict";n.r(t);var r=n(1),o=(n(5),{middleware:"auth",mounted:function(){this.$auth.loggedIn&&"kakooljay@gmail.com"===this.$auth.user.email||this.$router.push("/"),this.fetchLinks()},data:function(){return{newLink:"",updateLinkId:null,updateLinkInput:"",links:[],API_URL:"https://anecdotage.com/api/links"}},methods:{fetchLinks:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e.API_URL);case 3:if((n=t.sent).ok){t.next=6;break}throw new Error("Failed to fetch links.");case 6:return t.next=8,n.json();case 8:e.links=t.sent,t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),console.error("Error fetching links:",t.t0),e.showAlert("Error fetching links. Please try again later.");case 15:case"end":return t.stop()}}),t,null,[[0,11]])})))()},addLink:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.newLink){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,fetch(e.API_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({link:e.newLink})});case 5:if(!(n=t.sent).ok){t.next=12;break}e.showAlert("Link added successfully!"),e.newLink="",e.fetchLinks(),t.next=17;break;case 12:return t.next=14,n.json();case 14:r=t.sent,console.error("Failed add response:",r),e.showAlert("Failed to add link: "+(r.message||"Unknown error"));case 17:t.next=23;break;case 19:t.prev=19,t.t0=t.catch(2),console.error("Error adding link:",t.t0),e.showAlert("Failed to add link. Check the API connection.");case 23:case"end":return t.stop()}}),t,null,[[2,19]])})))()},openUpdateModal:function(e,t){this.updateLinkId=e,this.updateLinkInput=t,console.log("Modal opened with:",e,t),$("#updateModal").modal("show")},updateLink:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.updateLinkInput){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,fetch("".concat(e.API_URL,"/").concat(e.updateLinkId),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({link:e.updateLinkInput})});case 5:if(!(n=t.sent).ok){t.next=12;break}e.showAlert("Link updated successfully!"),e.fetchLinks(),e.closeModal(),t.next=17;break;case 12:return t.next=14,n.json();case 14:r=t.sent,console.error("Failed update response:",r),e.showAlert("Failed to update link: "+(r.message||"Unknown error"));case 17:t.next=23;break;case 19:t.prev=19,t.t0=t.catch(2),console.error("Error updating link:",t.t0),e.showAlert("Failed to update link. Check the API connection.");case 23:case"end":return t.stop()}}),t,null,[[2,19]])})))()},deleteLink:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!confirm("Are you sure you want to delete this link?")){n.next=22;break}return n.prev=2,n.next=5,fetch("".concat(t.API_URL,"/").concat(e),{method:"DELETE"});case 5:if(!(r=n.sent).ok){n.next=11;break}t.showAlert("Link deleted successfully!"),t.fetchLinks(),n.next=16;break;case 11:return n.next=13,r.json();case 13:o=n.sent,console.error("Failed delete response:",o),t.showAlert("Failed to delete link: "+(o.message||"Unknown error"));case 16:n.next=22;break;case 18:n.prev=18,n.t0=n.catch(2),console.error("Error deleting link:",n.t0),t.showAlert("Failed to delete link. Check the API connection.");case 22:case"end":return n.stop()}}),n,null,[[2,18]])})))()},showAlert:function(e){alert(e)},closeModal:function(){$("#updateModal").modal("hide")}}}),l=(n(699),n(3)),component=Object(l.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container mt-5"},[n("h1",{staticClass:"text-center mb-4"},[e._v("Link Manager")]),e._v(" "),n("div",{staticClass:"card mb-4 shadow-sm"},[n("div",{staticClass:"card-body"},[n("h5",{staticClass:"card-title"},[e._v("Add a New Link")]),e._v(" "),n("form",{staticClass:"row g-3",on:{submit:function(t){return t.preventDefault(),e.addLink.apply(null,arguments)}}},[n("div",{staticClass:"col-md-10"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.newLink,expression:"newLink"}],staticClass:"form-control",attrs:{type:"url",placeholder:"Enter a valid URL",required:""},domProps:{value:e.newLink},on:{input:function(t){t.target.composing||(e.newLink=t.target.value)}}})]),e._v(" "),e._m(0)])])]),e._v(" "),n("div",{staticClass:"card shadow-sm"},[n("div",{staticClass:"card-body"},[n("h5",{staticClass:"card-title"},[e._v("All Links")]),e._v(" "),n("table",{staticClass:"table table-striped table-hover"},[e._m(1),e._v(" "),n("tbody",e._l(e.links,(function(link){return n("tr",{key:link.id},[n("td",[e._v(e._s(link.id))]),e._v(" "),n("td",[e._v(e._s(link.link))]),e._v(" "),n("td",[n("button",{staticClass:"btn btn-sm btn-warning me-2",on:{click:function(t){return e.openUpdateModal(link.id,link.link)}}},[e._v("\n              Update\n            ")]),e._v(" "),n("button",{staticClass:"btn btn-sm btn-danger",on:{click:function(t){return e.deleteLink(link.id)}}},[e._v("\n              Delete\n            ")])])])})),0)])])]),e._v(" "),n("div",{staticClass:"modal fade",attrs:{id:"updateModal",tabindex:"-1",role:"dialog","aria-labelledby":"updateModalLabel","aria-hidden":"true"}},[n("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[n("div",{staticClass:"modal-content"},[e._m(2),e._v(" "),n("div",{staticClass:"modal-body"},[n("form",{on:{submit:function(t){return t.preventDefault(),e.updateLink.apply(null,arguments)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.updateLinkId,expression:"updateLinkId"}],attrs:{type:"hidden"},domProps:{value:e.updateLinkId},on:{input:function(t){t.target.composing||(e.updateLinkId=t.target.value)}}}),e._v(" "),n("div",{staticClass:"mb-3"},[n("label",{staticClass:"form-label",attrs:{for:"updateLinkInput"}},[e._v("New URL")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.updateLinkInput,expression:"updateLinkInput"}],staticClass:"form-control",attrs:{type:"url",placeholder:"Enter the new URL",required:""},domProps:{value:e.updateLinkInput},on:{input:function(t){t.target.composing||(e.updateLinkInput=t.target.value)}}})]),e._v(" "),n("button",{staticClass:"btn btn-primary w-100",attrs:{type:"submit"}},[e._v("Save Changes")])])])])])])])}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"col-md-2"},[n("button",{staticClass:"btn btn-primary w-100",attrs:{type:"submit"}},[e._v("Add Link")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",[n("tr",[n("th",[e._v("ID")]),e._v(" "),n("th",[e._v("Link")]),e._v(" "),n("th",[e._v("Actions")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"modal-header"},[n("h5",{staticClass:"modal-title",attrs:{id:"updateModalLabel"}},[e._v("Update Link")]),e._v(" "),n("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[n("span",{attrs:{"aria-hidden":"true"}},[e._v("Ã—")])])])}],!1,null,"9e1dc290",null);t.default=component.exports},634:function(e,t,n){var content=n(700);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(8).default)("0f4649be",content,!0,{sourceMap:!1})},699:function(e,t,n){"use strict";n(634)},700:function(e,t,n){var r=n(7)(!1);r.push([e.i,"",""]),e.exports=r}}]);