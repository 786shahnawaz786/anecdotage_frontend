(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{421:function(t,e,r){"use strict";r.r(e);r(15),r(20),r(9),r(29),r(30);var n=r(1),o=r(5),c=(r(6),r(21),r(22),r(27),r(660)),l=r(32);function m(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?m(Object(r),!0).forEach((function(e){Object(o.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var f={middleware:["auth"],mixins:[r(595).a],components:{"slim-cropper":c.a},head:function(){return{title:this.settings.site_title}},data:function(){return{slimOptions:{service:this.slimService,post:"output",defaultInputName:"photo",label:"Select image...",maxFileSize:2},uploading:!1,error:"",form:this.$vform({name:"",description:""})}},computed:d(d({},Object(l.c)({settings:"settings"})),{},{tag:function(){return this.$store.state.tags.tag},src:function(){return this.tag.photo_url}}),mounted:function(){this.form.name=this.tag.name,this.form.description=this.tag.description},methods:{slimService:function(t,progress,e,r,n){var o=this;this.uploading=!0,this.$axios.post("tags/".concat(this.tag.slug),t).then((function(t){o.$router.push({name:"tags",params:{slug:t.data.slug}})})).catch((function(t){var e=t.response.data.errors;o.error=e[Object.keys(e)[0]][0],r(500)})).finally((function(){o.uploading=!1}))},updateTag:function(){var t=this;this.$axios.$post("tags/".concat(this.tag.slug),this.form).then((function(e){t.$router.push({name:"tags",params:{slug:e.slug}})})).catch((function(t){}))}},fetch:function(t){return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n,o,c,l,q,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.params,n=t.query,o=t.error,c=t.$axios,l=t.store,e.next=3,Object.keys(n).map((function(t){return"".concat(t,"=").concat(n[t])})).join("&");case 3:return q=e.sent,e.prev=4,e.next=7,c.$get("tags/".concat(r.slug,"?").concat(q));case 7:m=e.sent,l.commit("tags/setTags",m.tag.data),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),404===e.t0.response.status?o({statusCode:404,message:"Tag Not Found"}):o({statusCode:500,message:"Server Error"});case 14:case"end":return e.stop()}}),e,null,[[4,11]])})))()}},v=r(3),component=Object(v.a)(f,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"card card-m-5"},[t._m(0),t._v(" "),e("div",{staticClass:"card-body"},[e("div",{staticClass:"row justify-content-center align-items-center text-center"},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"card bg-white shadow-sm"},[e("div",{staticClass:"d-flex flex-column justify-content-center p-1"},[t.error?e("div",{staticClass:"alert alert-danger"},[e("p",[t._v("An error occurred during the upload process")]),t._v(" "),e("p",[t._v(t._s(t.error))])]):t._e(),t._v(" "),e("slim-cropper",{attrs:{options:t.slimOptions,src:t.src}},[e("input",{attrs:{type:"file",name:"image"}})]),t._v(" "),t.uploading?e("div",{staticClass:"text-success caption-sm mt-2"},[e("svg",{staticClass:"svg-inline--fa fa-spinner fa-w-16",attrs:{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"spinner",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"}},[e("path",{attrs:{fill:"currentColor",d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"}})])]):t._e()],1)])])])])]),t._v(" "),e("div",{staticClass:"card card-m-5"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("form",{on:{submit:function(e){return e.preventDefault(),t.updateTag.apply(null,arguments)}}},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label",attrs:{for:"name"}},[t._v("\n                  Enter tag name\n                ")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],staticClass:"form-control",attrs:{type:"text",id:"name"},domProps:{value:t.form.name},on:{input:function(e){e.target.composing||t.$set(t.form,"name",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label",attrs:{for:"description"}},[t._v("\n                  Enter tag description")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.description,expression:"form.description"}],staticClass:"form-control",attrs:{name:"",cols:"30",rows:"5",id:"description"},domProps:{value:t.form.description},on:{input:function(e){e.target.composing||t.$set(t.form,"description",e.target.value)}}})]),t._v(" "),t._m(1)])])])])])])])}),[function(){var t=this._self._c;return t("div",{staticClass:"card-header"},[t("div",{staticClass:"left float-left"},[this._v("Edit Tag")])])},function(){var t=this._self._c;return t("div",{staticClass:"form-group"},[t("button",{staticClass:"btn btn-primary btn-block"},[this._v("Save")])])}],!1,null,null,null);e.default=component.exports},595:function(t,e,r){"use strict";e.a={mounted:function(){document.body.scrollTop=0,document.documentElement.scrollTop=0}}}}]);