(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{389:function(t,e,n){"use strict";n.r(e);n(642);var r=n(1),o=(n(6),{middleware:"auth",mounted:function(){this.$auth.loggedIn&&"kakooljay@gmail.com"===this.$auth.user.email||this.$router.push("/"),this.fetchLinks()},data:function(){return{newLink:"",updateLinkId:null,updateLinkInput:"",links:[],API_URL:"https://anecdotage.com/api/links"}},methods:{fetchLinks:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t.API_URL);case 3:if((n=e.sent).ok){e.next=6;break}throw new Error("Failed to fetch links.");case 6:return e.next=8,n.json();case 8:t.links=e.sent,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("Error fetching links:",e.t0),t.showAlert("Error fetching links. Please try again later.");case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))()},addLink:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.newLink){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,fetch(t.API_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({link:t.newLink})});case 5:if(!(n=e.sent).ok){e.next=12;break}t.showAlert("Link added successfully!"),t.newLink="",t.fetchLinks(),e.next=17;break;case 12:return e.next=14,n.json();case 14:r=e.sent,console.error("Failed add response:",r),t.showAlert("Failed to add link: "+(r.message||"Unknown error"));case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(2),console.error("Error adding link:",e.t0),t.showAlert("Failed to add link. Check the API connection.");case 23:case"end":return e.stop()}}),e,null,[[2,19]])})))()},openUpdateModal:function(t,e){this.updateLinkId=t,this.updateLinkInput=e,console.log("Modal opened with:",t,e),$("#updateModal").modal("show")},updateLink:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.updateLinkInput){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,fetch("".concat(t.API_URL,"/").concat(t.updateLinkId),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({link:t.updateLinkInput})});case 5:if(!(n=e.sent).ok){e.next=12;break}t.showAlert("Link updated successfully!"),t.fetchLinks(),t.closeModal(),e.next=17;break;case 12:return e.next=14,n.json();case 14:r=e.sent,console.error("Failed update response:",r),t.showAlert("Failed to update link: "+(r.message||"Unknown error"));case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(2),console.error("Error updating link:",e.t0),t.showAlert("Failed to update link. Check the API connection.");case 23:case"end":return e.stop()}}),e,null,[[2,19]])})))()},deleteLink:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!confirm("Are you sure you want to delete this link?")){n.next=22;break}return n.prev=2,n.next=5,fetch("".concat(e.API_URL,"/").concat(t),{method:"DELETE"});case 5:if(!(r=n.sent).ok){n.next=11;break}e.showAlert("Link deleted successfully!"),e.fetchLinks(),n.next=16;break;case 11:return n.next=13,r.json();case 13:o=n.sent,console.error("Failed delete response:",o),e.showAlert("Failed to delete link: "+(o.message||"Unknown error"));case 16:n.next=22;break;case 18:n.prev=18,n.t0=n.catch(2),console.error("Error deleting link:",n.t0),e.showAlert("Failed to delete link. Check the API connection.");case 22:case"end":return n.stop()}}),n,null,[[2,18]])})))()},showAlert:function(t){alert(t)},closeModal:function(){$("#updateModal").modal("hide")}}}),l=(n(730),n(3)),component=Object(l.a)(o,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"container mt-5"},[e("h1",{staticClass:"text-center mb-4"},[t._v("Link Manager")]),t._v(" "),e("div",{staticClass:"card mb-4 shadow-sm"},[e("div",{staticClass:"card-body"},[e("h5",{staticClass:"card-title"},[t._v("Add a New Link")]),t._v(" "),e("form",{staticClass:"row g-3",on:{submit:function(e){return e.preventDefault(),t.addLink.apply(null,arguments)}}},[e("div",{staticClass:"col-md-10"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.newLink,expression:"newLink"}],staticClass:"form-control",attrs:{type:"url",placeholder:"Enter a valid URL",required:""},domProps:{value:t.newLink},on:{input:function(e){e.target.composing||(t.newLink=e.target.value)}}})]),t._v(" "),t._m(0)])])]),t._v(" "),e("div",{staticClass:"card shadow-sm"},[e("div",{staticClass:"card-body"},[e("h5",{staticClass:"card-title"},[t._v("All Links")]),t._v(" "),e("table",{staticClass:"table table-striped table-hover"},[t._m(1),t._v(" "),e("tbody",t._l(t.links,(function(link){return e("tr",{key:link.id},[e("td",[t._v(t._s(link.id))]),t._v(" "),e("td",[t._v(t._s(link.link))]),t._v(" "),e("td",[e("button",{staticClass:"btn btn-sm btn-warning me-2",on:{click:function(e){return t.openUpdateModal(link.id,link.link)}}},[t._v("\n              Update\n            ")]),t._v(" "),e("button",{staticClass:"btn btn-sm btn-danger",on:{click:function(e){return t.deleteLink(link.id)}}},[t._v("\n              Delete\n            ")])])])})),0)])])]),t._v(" "),e("div",{staticClass:"modal fade",attrs:{id:"updateModal",tabindex:"-1",role:"dialog","aria-labelledby":"updateModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[t._m(2),t._v(" "),e("div",{staticClass:"modal-body"},[e("form",{on:{submit:function(e){return e.preventDefault(),t.updateLink.apply(null,arguments)}}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.updateLinkId,expression:"updateLinkId"}],attrs:{type:"hidden"},domProps:{value:t.updateLinkId},on:{input:function(e){e.target.composing||(t.updateLinkId=e.target.value)}}}),t._v(" "),e("div",{staticClass:"mb-3"},[e("label",{staticClass:"form-label",attrs:{for:"updateLinkInput"}},[t._v("New URL")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.updateLinkInput,expression:"updateLinkInput"}],staticClass:"form-control",attrs:{type:"url",placeholder:"Enter the new URL",required:""},domProps:{value:t.updateLinkInput},on:{input:function(e){e.target.composing||(t.updateLinkInput=e.target.value)}}})]),t._v(" "),e("button",{staticClass:"btn btn-primary w-100",attrs:{type:"submit"}},[t._v("Save Changes")])])])])])])])}),[function(){var t=this._self._c;return t("div",{staticClass:"col-md-2"},[t("button",{staticClass:"btn btn-primary w-100",attrs:{type:"submit"}},[this._v("Add Link")])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("ID")]),t._v(" "),e("th",[t._v("Link")]),t._v(" "),e("th",[t._v("Actions")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"updateModalLabel"}},[t._v("Update Link")]),t._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("Ã—")])])])}],!1,null,"9e1dc290",null);e.default=component.exports},642:function(t,e,n){"use strict";n(643)("link",(function(t){return function(e){return t(this,"a","href",e)}}))},643:function(t,e,n){var r=n(12),o=n(23),l=n(51),c=/"/g,d=function(t,e,n,r){var o=String(l(t)),d="<"+e;return""!==n&&(d+=" "+n+'="'+String(r).replace(c,"&quot;")+'"'),d+">"+o+"</"+e+">"};t.exports=function(t,e){var n={};n[t]=e(d),r(r.P+r.F*o((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3})),"String",n)}},664:function(t,e,n){var content=n(731);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(8).default)("cc76fa86",content,!0,{sourceMap:!1})},730:function(t,e,n){"use strict";n(664)},731:function(t,e,n){var r=n(7)((function(i){return i[1]}));r.push([t.i,"",""]),r.locals={},t.exports=r}}]);